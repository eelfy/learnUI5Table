/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/ui/documentation/sdk/controller/BaseController","sap/ui/documentation/sdk/controller/util/SearchUtil","sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/ui/core/ResizeHandler","sap/ui/Device","sap/ui/core/Fragment","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/base/util/UriParameters","sap/ui/documentation/library","sap/ui/core/IconPool","sap/m/MessageBox","sap/m/library","sap/base/Log","sap/base/util/Version","sap/ui/core/syncStyleClass","sap/ui/core/Core","sap/ui/documentation/sdk/model/formatter","sap/m/ResponsivePopover","sap/ui/documentation/sdk/controller/util/Highlighter","sap/m/Button","sap/m/Toolbar","sap/ui/documentation/sdk/util/Resources"],function(K,q,B,S,C,F,c,J,R,D,d,L,f,U,g,I,M,m,h,V,s,k,n,o,H,p,T,r){"use strict";var t=m.SplitAppMode;var u="Demo Kit - \uFFFD SDK",W={topic:"Documentation - "+u,api:"API Reference - "+u,controls:"Samples - "+u,demoapps:"Demo Apps - "+u,tools:"Tools - "+u,home:u};var v=m.URLHelper,N=r.getResourceOriginPath("/neo-app.json"),w=r.getResourceOriginPath("/versionoverview.json"),A="about",x="feedback",y="change_version",z="settings",E="cookie_preferences",G="en",O="light",P="dark",Q="auto",X=Object.create(null),Y="language",Z="appearance",$="sitemap";X[O]="sap_fiori_3";X[P]="sap_fiori_3_dark";X[Q]="sap_fiori_3";return B.extend("sap.ui.documentation.sdk.controller.App",{formatter:n,onInit:function(){B.prototype.onInit.call(this);var a=new J({busy:false,delay:0,bPhoneSize:false,bShowVersionSwitchInHeader:false,bShowVersionSwitchInMenu:false,bLandscape:D.orientation.landscape,bHasMaster:false,bSearchMode:false,bHideTopicSection:!!window['sap-ui-documentation-hideTopicSection'],bHideApiSection:!!window['sap-ui-documentation-hideApiSection'],sAboutInfoSAPUI5:"Looking for the Demo Kit for a specific SAPUI5 version? "+"Check at <a href = 'https://sapui5.hana.ondemand.com/versionoverview.html'>https://sapui5.hana.ondemand.com/versionoverview.html</a> "+"which versions are available. "+"You can view the version-specific Demo Kit by adding the version number to the URL, e.g. "+"<a href='https://sapui5.hana.ondemand.com/1.52.4/'>https://sapui5.hana.ondemand.com/1.52.4/</a>",sAboutInfoOpenUI5:"Looking for the Demo Kit for a specific OpenUI5 version? "+"Check at <a href = 'https://openui5.hana.ondemand.com/versionoverview.html'>https://openui5.hana.ondemand.com/versionoverview.html</a> "+"which versions are available. "+"You can view the version-specific Demo Kit by adding the version number to the URL, e.g. "+"<a href='https://openui5.hana.ondemand.com/1.52.4/'>https://openui5.hana.ondemand.com/1.52.4/</a>"}),b,e;this.MENU_LINKS_MAP={"legal":"https://www.sap.com/corporate/en/legal/impressum.html","privacy":"https://www.sap.com/corporate/en/legal/privacy.html","terms_of_use":"https://www.sap.com/corporate/en/legal/terms-of-use.html","copyright":"https://www.sap.com/corporate/en/legal/copyright.html","trademark":"https://www.sap.com/corporate/en/legal/trademark.html","disclaimer":"https://help.sap.com/viewer/disclaimer","sitemap":"sitemap","license":"LICENSE.txt"};this.getOwnerComponent().loadVersionInfo().then(function(){var i;if(this.getModel("versionData").getProperty("/isOpenUI5")){this.MENU_LINKS_MAP["Terms of Use"]="TermsOfUse.txt";i="OPENUI5";}else{i="SAPUI5";}u=u.replace("\uFFFD",i);Object.keys(W).forEach(function(j){W[j]=W[j].replace("\uFFFD",i);});}.bind(this));this.FEEDBACK_SERVICE_URL="https://feedback-sapuisofiaprod.hana.ondemand.com:443/api/v2/apps/5bb7d7ff-bab9-477a-a4c7-309fa84dc652/posts";this._oSupportedLangModel=new J({"langs":this._prepareSupportedLangModelData()});this.setModel(this._oSupportedLangModel,"supportedLanguages");this._oView=this.getView();this.setModel(a,"appView");this.oHeader=this._oView.byId("headerToolbar");this.oRouter=this.getRouter();this._selectHeader=this._oView.byId("selectHeader");this._tabHeader=this._oView.byId("tabHeader");this._oConfigUtil=this.getOwnerComponent().getConfigUtil();this._oCookieNames=this._oConfigUtil.COOKIE_NAMES;this._bSupportsPrefersColorScheme=!!(window.matchMedia&&(window.matchMedia('(prefers-color-scheme: dark)').matches||window.matchMedia('(prefers-color-scheme: light)').matches));R.register(this.oHeader,this.onHeaderResize.bind(this));this.oRouter.attachRouteMatched(this.onRouteChange.bind(this));this.oRouter.attachBypassed(this.onRouteNotFound.bind(this));this._registerFeedbackRatingIcons();this._requestVersionInfo();this.byId("splitApp").attachEvent("afterMasterClose",function(i){a.setProperty("/bIsShownMaster",false);},this);this.bus=k.getEventBus();this._createConfigurationBasedOnURIInput();this.getOwnerComponent().loadVersionInfo().then(function(){b=this.getModel("versionData").getProperty("/supportsSWA");e=this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_USAGE_TRACKING)==="1";if(b&&e){this._oConfigUtil.enableUsageTracking();}}.bind(this));if(this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_REQUIRED_COOKIES)==="1"&&this._aConfiguration.length>0){this._applyCookiesConfiguration(this._aConfiguration);}else{this._applyDefaultConfiguration(this._aConfiguration);}this.initSearch();document.addEventListener("keydown",function(i){if(i.keyCode===K.F&&i.shiftKey&&i.ctrlKey){this.byId("searchControl")._toggleOpen(true);}}.bind(this));},onBeforeRendering:function(){D.orientation.detachHandler(this._onOrientationChange,this);},onAfterRendering:function(){var b;q(document.body).addClass(this.getOwnerComponent().getContentDensityClass());D.orientation.attachHandler(this._onOrientationChange,this);if(this._oConfigUtil.getCookieValue(this._oCookieNames.APPROVAL_REQUESTED)!=="1"){b=this.getModel("versionData").getProperty("/supportsSWA");this.cookieSettingsDialogOpen({showCookieDetails:false,supportsUsageTracking:b});}},onExit:function(){D.orientation.detachHandler(this._onOrientationChange,this);if(this.highlighter){this.highlighter.destroy();}},onRouteChange:function(e){if(!this.oRouter.getRoute(e.getParameter("name"))._oConfig.target){return;}var a=e.getParameter("name"),b=this.oRouter.getRoute(a)._oConfig.target[0]+"Tab",i=this._oView.byId(b),j=i?i.getKey():"home",l=this.getModel("appView"),_=l.getProperty("/bPhoneSize"),a1=l.getProperty("/bSearchMode"),b1=D.system.phone,c1=this.getOwnerComponent().getConfigUtil().hasMasterView(a),d1,e1;this._setHeaderSelectedKey(j);l.setProperty("/bHasMaster",c1);if(_&&!a1){this._selectHeader.setVisible(true);}if(b1&&c1){d1=this.getOwnerComponent().getConfigUtil().getMasterView(a);e1=d1&&d1.getId();l.setProperty("/sMasterViewId",e1);}this.byId("splitApp").hideMaster();l.setProperty("/bIsShownMaster",false);this.appendPageTitle(null).appendPageTitle(W[j]);},toggleMaster:function(e){var b=e.getParameter("pressed"),a=D.system.phone,i=this.byId("splitApp"),j=i.getMode()===t.ShowHideMode,l=i.getMode()===t.HideMode,_=this.getModel("appView").getProperty("/sMasterViewId"),a1;if(!a&&(j||l)){a1=(b)?i.showMaster:i.hideMaster;a1.call(i);return;}if(a){if(b){i.to(_);}else{i.backDetail();}}},navigateToSection:function(e){var a=e.getParameter("key"),i;if(!a){i=e.getParameter("selectedItem");i&&(a=i.getKey());}e.preventDefault();if(a&&a!=="home"){this.getRouter().navTo(a,{});}else{this.getRouter().navTo("welcome",{});this._setHeaderSelectedKey("home");}},handleMenuItemClick:function(e){var a=e.getParameter("item").getKey(),b=this.MENU_LINKS_MAP[a];if(a===A){this.aboutDialogOpen();}else if(a===x){this.feedbackDialogOpen();}else if(a===z){this.settingsDialogOpen();}else if(a===E){this.cookieSettingsDialogOpen({showCookieDetails:true});}else if(a===y){this.onChangeVersionButtonPress();}else if(X[a]){this._updateAppearance(a);}else if(b===$){this.onSiteMapPress();}else if(b){v.redirect(b,true);}this.sTarget=b;},createSearchPopover:function(){var a=m.PlacementType,b=this.getView().byId("searchControl"),e=new o({showArrow:false,showHeader:false,contentWidth:"600px",placement:a.Vertical,horizontalScrolling:false,initialFocus:this.getView().byId("searchControl-searchField")}).addStyleClass("sapMSltPicker-CTX");e.open=function(){e.openBy(b);};this.getView().addDependent(e);return e;},createSearchPicker:function(){var a=D.system.phone?this.createSearchDialog():this.createSearchPopover();this.createSearchPickerContent().then(function(b){a.addContent(b);});return a;},createSearchDialog:function(){var a,b,e,i,j,l,_;var a1=this.getView().byId("searchControl");e=new(sap.ui.require('sap/m/SearchField'))({liveChange:function(c1){var d1=c1.getParameter("newValue");a1._updateValue(d1);a1.fireLiveChange({newValue:d1});},search:function(c1){if(!c1.getParameter("clearButtonPressed")){a.close();_=true;}}});l=new p({icon:"sap-icon://decline",press:function(){a._oCloseTrigger=true;a.close();a1._updateValue(b);}});i=new T({content:[e,l]});j=new p({text:k.getLibraryResourceBundle("sap.m").getText("MSGBOX_OK"),press:function(){a.close();}});function b1(el){if(typeof el.selectionStart=="number"){el.selectionStart=el.selectionEnd=el.value.length;}else if(typeof el.createTextRange!="undefined"){el.focus();var c1=el.createTextRange();c1.collapse(false);c1.select();}}a=new(sap.ui.require('sap/m/Dialog'))({stretch:true,customHeader:i,beginButton:j,beforeClose:function(){a1._bSuggestionSuppressed=true;},beforeOpen:function(){b=a1.getValue();e._updateValue(b);_=false;},afterOpen:function(){var c1=e.$().find('input');c1.focus();b1(c1.get(0));},afterClose:function(c1){if(_){a1.fireSearch({query:a1.getValue(),clearButtonPressed:false});}}});this.getView().addDependent(a);return a;},createSearchPickerContent:function(){return d.load({name:"sap.ui.documentation.sdk.view.GlobalSearchPicker",controller:this}).then(function(a){var b=k.byId("shortList"),e=this,i;b.addEventDelegate({onAfterRendering:function(){var j={useExternalStyles:false,shouldBeObserved:true,isCaseSensitive:false};e.highlighter=new H(b.getDomRef(),j);i=e.getModel("searchData").getProperty("/query");i&&e.highlighter.highlight(i);b.removeEventDelegate(this);}});return a;}.bind(this));},initSearch:function(){var a=new J(),b={"topics":["topic","topicId","subTopicId"],"entity":["sample","controlsMaster","controls","code","entity"],"apiref":["api","apiSpecialRoute","apiId"]};this.setModel(a,"searchData");this.oRouter.attachRouteMatched(function(){a.setProperty("/routeSection",null);});Object.keys(b).forEach(function(e){var i=b[e];i.forEach(function(j){this.oRouter.getRoute(j).attachPatternMatched(function(){a.setProperty("/routeSection",e);});}.bind(this));}.bind(this));},getSearchPickerTitle:function(a){var b=k.getLibraryResourceBundle("sap.ui.documentation"),e;switch(this.getModel("searchData").getProperty("/routeSection")){case"topics":e=b.getText("SEARCH_SUGGESTIONS_TITLE_DOCUMENTATION");break;case"apiref":e=b.getText("SEARCH_SUGGESTIONS_TITLE_API_REFERENCE");break;case"entity":e=b.getText("SEARCH_SUGGESTIONS_TITLE_SAMPLES");break;default:e=b.getText("SEARCH_SUGGESTIONS_TITLE_ALL");}return e;},onSearchResultsSummaryPress:function(e){var a=e.oSource.data("category");this.navToSearchResults(a);},onSearchPickerItemPress:function(e){var a=e.oSource.getBindingContextPath(),b=this.getModel("searchData").getProperty(a);this.getRouter().parsePath(b.path);this.oPicker.close();},_updateAppearance:function(a){if(a===Q&&this._bSupportsPrefersColorScheme){this._toggleLightOrDarkAppearance(window.matchMedia('(prefers-color-scheme: dark)').matches);this._attachPrefersColorSchemeChangeListener();}else{k.applyTheme(X[a]);}this._sLastKnownAppearanceKey=a;this.bus.publish("themeChanged","onDemoKitThemeChanged",{sThemeActive:X[a]});if(this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_REQUIRED_COOKIES)==="1"){this._oConfigUtil.setCookie(Z,a);}},_toggleLightOrDarkAppearance:function(i){if(i){k.applyTheme(X[P]);}else{k.applyTheme(X[O]);}},_attachPrefersColorSchemeChangeListener:function(){var a=this;if(!this._bAttachedPrefersColorSchemeChangeListener){window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',function(e){if(a._sLastKnownAppearanceKey===Q){a._toggleLightOrDarkAppearance(e.matches);a.bus.publish("themeChanged","onDemoKitThemeChanged",{sThemeActive:X[e.matches?P:O]});}});this._bAttachedPrefersColorSchemeChangeListener=true;}},_createConfigurationBasedOnURIInput:function(){var a=U.fromQuery(window.location.search);this._aConfiguration=[];if(!(a.has('sap-ui-language')||a.has('sap-language'))){this._aConfiguration.push(Y);}if(!(a.has('sap-ui-theme')||a.has('sap-theme'))){this._aConfiguration.push(Z);}},_applyDefaultConfiguration:function(){this._aConfiguration.forEach(function(a){if(a===Y){k.getConfiguration().setLanguage(G);}else if(a===Z){this._updateAppearance(Q);}},this);this._oSupportedLangModel.setProperty("/selectedLang",k.getConfiguration().getLanguage());},_applyCookiesConfiguration:function(){var a,b,i;for(i=0;i<this._aConfiguration.length;i++){b=this._aConfiguration[i];a=this._oConfigUtil.getCookieValue(b);if(a!==""){if(b===Y){this._setSelectedLanguage(a);}else if(b===Z){this._updateAppearance(a);}this._aConfiguration.splice(i,1);i--;}}if(this._aConfiguration.length>0){this._applyDefaultConfiguration();}},_prepareSupportedLangModelData:function(){return k.getConfiguration().getLanguagesDeliveredWithCore().reduce(function(a,l){var b;if(typeof l==="string"&&l.length>0){switch(l){case"iw":b=new f(new L("he")).getLanguages()["he"];break;case"zh_TW":b=new f(new L(l)).getLanguages()["zh_Hant"];break;case"zh_CN":b=new f(new L(l)).getLanguages()["zh_Hans"];break;default:b=new f(new L(l)).getLanguages()[l];}a.push({"text":typeof b==='string'?b.charAt(0).toUpperCase()+b.substring(1):"Unknown","key":l});}return a;},[]);},_setSelectedLanguage:function(l){this._oSupportedLangModel.setProperty("/selectedLang",l);k.getConfiguration().setLanguage(l);if(this._oConfigUtil.getCookieValue(this._oCookieNames.ALLOW_REQUIRED_COOKIES)==="1"){this._oConfigUtil.setCookie(Y,l);}},_getSelectedLanguage:function(){return this._oSupportedLangModel.getProperty("/selectedLang");},settingsDialogOpen:function(){if(!this._oSettingsDialog){d.load({name:"sap.ui.documentation.sdk.view.globalSettingsDialog",controller:this}).then(function(a){this._oView.addDependent(a);this._oSettingsDialog=a;k.byId("LanguageSelect").setSelectedKey(this._getSelectedLanguage());this._oSettingsDialog.open();}.bind(this));}else{this._oSettingsDialog.open();}},cookieSettingsDialogOpen:function(a){this.getCookieSettingsController().then(function(b){b.openCookieSettingsDialog(this._oConfigUtil,this.getView(),a);}.bind(this));},getCookieSettingsController:function(){if(!this.oCookieSettingsControllerPromise){this.oCookieSettingsControllerPromise=new Promise(function(a,b){C.create({name:"sap.ui.documentation.sdk.controller.CookieSettingsDialog"}).then(function(e){a(e);});});}return this.oCookieSettingsControllerPromise;},handleCloseAppSettings:function(){this._oSettingsDialog.close();},handleSaveAppSettings:function(){var l=k.byId('LanguageSelect').getSelectedKey();this._oSettingsDialog.close();this._applyAppConfiguration(l);},_applyAppConfiguration:function(l){this._setSelectedLanguage(l);},aboutDialogOpen:function(){if(!this._oAboutDialog){this._oAboutDialog=new sap.ui.xmlfragment("aboutDialogFragment","sap.ui.documentation.sdk.view.AboutDialog",this);this._oView.addDependent(this._oAboutDialog);}else{this._oAboutDialog.getContent()[0].backToTop();}this._oAboutDialog.open();},aboutDialogClose:function(e){this._oAboutDialog.close();},onAboutVersionDetails:function(e){var a=this.getModel("appView"),b=a.getData(),j=this;g._loadAllLibInfo("","_getLibraryInfo","",function(b1,c1){var d1={};var e1=g._getLibraryInfoSingleton();for(var i=0,l=b1.length;i<l;i++){b1[i]=c1[b1[i]];b1[i].libDefaultComponent=e1._getDefaultComponent(b1[i]);}d1.libs=b1;b.oVersionInfo=d1;a.setData(b);j.setModel(a,"appView");});var _=d.byId("aboutDialogFragment","aboutNavCon"),a1=d.byId("aboutDialogFragment","aboutDetail");_.to(a1);},onAboutThirdParty:function(e){var l=this.getModel("appView"),_=l.getData(),a1=this;g._loadAllLibInfo("","_getThirdPartyInfo",function(d1,e1){if(!d1){return;}var f1={};f1.thirdparty=[];for(var j=0;j<d1.length;j++){var g1=e1[d1[j]];for(var i=0;i<g1.libs.length;i++){var h1=g1.libs[i];h1._lib=d1[j];f1.thirdparty.push(h1);}}f1.thirdparty.sort(function(a,b){var i1=(a.displayName||"").toUpperCase();var j1=(b.displayName||"").toUpperCase();if(i1>j1){return 1;}else if(i1<j1){return-1;}else{return 0;}});_.oThirdPartyInfo=f1;l.setData(_);a1.setModel(l,"appView");});var b1=d.byId("aboutDialogFragment","aboutNavCon"),c1=d.byId("aboutDialogFragment","aboutThirdParty");b1.to(c1);},onReleaseDialogOpen:function(e){var l=g._getLibraryInfoSingleton(),a=e.getSource().data("version"),b=e.getSource().data("library"),i=new J(),j=new J(),_=this;if(!this._oReleaseDialog){this._oReleaseDialog=new sap.ui.xmlfragment("releaseDialogFragment","sap.ui.documentation.sdk.view.ReleaseDialog",this);this._oView.addDependent(this._oReleaseDialog);}if(!this._oNotesView){this._oNotesView=sap.ui.view({id:"notesView",viewName:"sap.ui.documentation.sdk.view.ReleaseNotesView",type:"Template"});this._oNotesView.setModel(i);}l._getReleaseNotes(b,a,function(a1,a){var b1={};if(a1&&a1[a]&&a1[a].notes&&a1[a].notes.length>0){_._oNotesView.getModel().setData(a1);_._oNotesView.bindObject("/"+a);}else{b1.noData=true;}b1.library=b;j.setData(b1);});this._oReleaseDialog.setModel(j);this._oReleaseDialog.addContent(this._oNotesView);this._oReleaseDialog.open();},onReleaseDialogClose:function(e){this._oReleaseDialog.close();},onAboutNavBack:function(e){var a=d.byId("aboutDialogFragment","aboutNavCon");a.back();},onChangeVersionButtonPress:function(){this.getVersionSwitchDialog().open();},onCloseVersionDialog:function(){this.getVersionSwitchDialog().close();},onChangeVersionDialogSearch:function(e){var a=e.getParameter("newValue"),b=new F("version",c.Contains,a),i=k.byId("versionList").getBinding("items");i.filter([b]);},onLogoIconPress:function(){this.oRouter.navTo("welcome",{});},onSiteMapPress:function(){this.oRouter.navTo("sitemap",{});},onVersionItemPress:function(e){var a=e.getParameter("listItem"),b=a.getCustomData()[0];if(b&&b.getKey()==="path"){window.location.href=b.getValue();}},getVersionSwitchDialog:function(){if(!this._oChangeVersionDialog){this._createVersionDialog();}return this._oChangeVersionDialog;},versionSwitchCustomComparator:function(a,b){return V(a).compareTo(V(b));},_updateVersionSwitchVisibility:function(){var a=this.getModel("appView"),b=a.getProperty("/bPhoneSize");a.setProperty("/bShowVersionSwitchInHeader",!b&&!!this._aNeoAppVersions);a.setProperty("/bShowVersionSwitchInMenu",b&&!!this._aNeoAppVersions);},_createVersionDialog:function(){this._oChangeVersionDialog=new sap.ui.xmlfragment("sap.ui.documentation.sdk.view.ChangeVersionDialog",this);this._oChangeVersionDialog.setModel(this._buildVersionDialogModel());this._oView.addDependent(this._oChangeVersionDialog);},_buildVersionDialogModel:function(){var a=new J();a.setSizeLimit(1000);a.setData(this._aNeoAppVersions);return a;},feedbackDialogOpen:function(){var a=this;var b;if(!this._oFeedbackDialog){b=this.getModel("i18n").getResourceBundle();this._oFeedbackDialog=new sap.ui.xmlfragment("feedbackDialogFragment","sap.ui.documentation.sdk.view.FeedbackDialog",this);this._oView.addDependent(this._oFeedbackDialog);this._oFeedbackDialog.textInput=d.byId("feedbackDialogFragment","feedbackInput");this._oFeedbackDialog.contextCheckBox=d.byId("feedbackDialogFragment","pageContext");this._oFeedbackDialog.contextData=d.byId("feedbackDialogFragment","contextData");this._oFeedbackDialog.ratingStatus=d.byId("feedbackDialogFragment","ratingStatus");this._oFeedbackDialog.ratingStatus.value=0;this._oFeedbackDialog.sendButton=d.byId("feedbackDialogFragment","sendButton");this._oFeedbackDialog.ratingBar=[{button:d.byId("feedbackDialogFragment","excellent"),status:"Excellent",displayStatus:b.getText("FEEDBACK_DIALOG_STATUS_EXCELLENT")},{button:d.byId("feedbackDialogFragment","good"),status:"Good",displayStatus:b.getText("FEEDBACK_DIALOG_STATUS_GOOD")},{button:d.byId("feedbackDialogFragment","average"),status:"Average",displayStatus:b.getText("FEEDBACK_DIALOG_STATUS_AVERAGE")},{button:d.byId("feedbackDialogFragment","poor"),status:"Poor",displayStatus:b.getText("FEEDBACK_DIALOG_STATUS_POOR")},{button:d.byId("feedbackDialogFragment","veryPoor"),status:"Very Poor",displayStatus:b.getText("FEEDBACK_DIALOG_STATUS_VERY_POOR")}];this._oFeedbackDialog.reset=function(){this.sendButton.setEnabled(false);this.textInput.setValue("");this.contextCheckBox.setSelected(true);this.ratingStatus.setText("");this.ratingStatus.setState("None");this.ratingStatus.value=0;this.contextData.setVisible(false);this.ratingBar.forEach(function(e){if(e.button.getPressed()){e.button.setPressed(false);}});};this._oFeedbackDialog.updateContextData=function(){var e=a._getUI5Version(),i=a._getUI5Distribution();if(this.contextCheckBox.getSelected()){this.contextData.setValue("Location: "+a._getCurrentPageRelativeURL()+"\n"+i+" Version: "+e);}else{this.contextData.setValue(i+" Version: "+e);}};this._oFeedbackDialog.updateContextData();}this._oFeedbackDialog.updateContextData();if(!this._oFeedbackDialog.isOpen()){s("sapUiSizeCompact",this.getView(),this._oFeedbackDialog);this._oFeedbackDialog.open();}},onFeedbackDialogSend:function(){var a={},b=this.getModel("i18n").getResourceBundle();if(this._oFeedbackDialog.contextCheckBox.getSelected()){a={"texts":{"t1":this._oFeedbackDialog.textInput.getValue()},"ratings":{"r1":{"value":this._oFeedbackDialog.ratingStatus.value}},"context":{"page":this._getCurrentPageRelativeURL(),"attr1":this._getUI5Distribution()+":"+sap.ui.version}};}else{a={"texts":{"t1":this._oFeedbackDialog.textInput.getValue()},"ratings":{"r1":{"value":this._oFeedbackDialog.ratingStatus.value}},"context":{"attr1":this._getUI5Distribution()+":"+sap.ui.version}};}this._oFeedbackDialog.setBusyIndicatorDelay(0);this._oFeedbackDialog.setBusy(true);q.ajax({url:this.FEEDBACK_SERVICE_URL,type:"POST",contentType:"application/json",data:JSON.stringify(a)}).done(function(){M.success(b.getText("FEEDBACK_DIALOG_TEXT_SUCCESS"),{title:b.getText("FEEDBACK_DIALOG_TITLE_SUCCESS")});this._oFeedbackDialog.reset();this._oFeedbackDialog.close();this._oFeedbackDialog.setBusy(false);}.bind(this)).fail(function(e,i,j){var l=j;M.error(b.getText("FEEDBACK_DIALOG_TEXT_ERROR")+l,{title:b.getText("FEEDBACK_DIALOG_TITLE_ERROR")});this._oFeedbackDialog.setBusy(false);}.bind(this));},onFeedbackDialogCancel:function(){this._oFeedbackDialog.reset();this._oFeedbackDialog.close();},onShowHideContextData:function(){this._oFeedbackDialog.contextData.setVisible(!this._oFeedbackDialog.contextData.getVisible());},onContextSelect:function(){this._oFeedbackDialog.updateContextData();},onPressRatingButton:function(e){var a=this;var b=e.getSource();a._oFeedbackDialog.ratingBar.forEach(function(j){if(b!==j.button){j.button.setPressed(false);}else{if(!j.button.getPressed()){i("None","",0);}else{switch(j.status){case"Excellent":i("Success",j.displayStatus,5);break;case"Good":i("Success",j.displayStatus,4);break;case"Average":i("None",j.displayStatus,3);break;case"Poor":i("Warning",j.displayStatus,2);break;case"Very Poor":i("Error",j.displayStatus,1);}}}});function i(j,l,_){a._oFeedbackDialog.ratingStatus.setState(j);a._oFeedbackDialog.ratingStatus.setText(l);a._oFeedbackDialog.ratingStatus.value=_;if(_){a._oFeedbackDialog.sendButton.setEnabled(true);}else{a._oFeedbackDialog.sendButton.setEnabled(false);}}},onSearch:function(e){var a=encodeURIComponent(e.getParameter("query"));if(!a){return;}this.getRouter().navTo("search",{searchParam:a},false);this.oPicker.close();},navToSearchResults:function(a){var b=this.getModel("searchData").getProperty("/query"),e={searchParam:b};if(!b){return;}if(a){e["?options"]={category:a};}this.getRouter().navTo("search",e,true);this.oPicker.close();},onSearchLiveChange:function(e){var a=this.getModel("searchData"),b=e.getParameter("newValue"),i=this.getModel("searchData").getProperty("/routeSection");if(!this.oPicker){this.oPicker=this.createSearchPicker();}if(!this.oPicker.isOpen()){this.oPicker.open();}if(this.highlighter){this.highlighter.highlight(b);}a.setProperty("/query",b);S.search(b,i).then(function(j){a.setProperty("/matches",j.matches);});},onHeaderResize:function(e){var i=e.size.width,b=D.system.phone||i<D.media._predefinedRangeSets[D.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0],a=this.getModel("appView"),j=a.getProperty("/bSearchMode");if(b!==a.getProperty("/bPhoneSize")){a.setProperty("/bPhoneSize",b);this._updateVersionSwitchVisibility();this._tabHeader.setVisible(!b);this._selectHeader.setVisible(b);}if(j){this._selectHeader.setVisible(false);}},_onOrientationChange:function(){this.getModel("appView").setProperty("/bLandscape",D.orientation.landscape);},onToggleSearchMode:function(e){var b=e.getParameter("isOpen"),a=this.getModel("appView"),i=a.getProperty("/bPhoneSize");a.setProperty("/bSearchMode",b);if(b){S.init();setTimeout(function(){this._oView.byId("searchControl").getAggregation("_searchField").getFocusDomRef().focus();}.bind(this),0);if(i){this._selectHeader.setVisible(false);}}else if(i){this._selectHeader.setVisible(true);}},_registerFeedbackRatingIcons:function(){I.addIcon("icon-face-very-bad","FeedbackRatingFaces",{fontFamily:"FeedbackRatingFaces",content:"E086",suppressMirroring:true});I.addIcon("icon-face-bad","FeedbackRatingFaces",{fontFamily:"FeedbackRatingFaces",content:"E087",suppressMirroring:true});I.addIcon("icon-face-neutral","FeedbackRatingFaces",{fontFamily:"FeedbackRatingFaces",content:"E089",suppressMirroring:true});I.addIcon("icon-face-happy","FeedbackRatingFaces",{fontFamily:"FeedbackRatingFaces",content:"E08B",suppressMirroring:true});I.addIcon("icon-face-very-happy","FeedbackRatingFaces",{fontFamily:"FeedbackRatingFaces",content:"E08C",suppressMirroring:true});},_processVersionOverview:function(a){var b=a.versions,e=[];if(Array.isArray(b)){b=b.filter(function(i){return!!i.hidden;}).forEach(function(i){var j=i.hidden.split(",").map(function(l){return l.trim();});e=e.concat(j);});}return e;},_processNeoAppJSON:function(a){var b=this.getModel("versionData"),i=b.getProperty("/isInternal"),e=b.getProperty("/isSnapshotVersion"),j=[];if(!(a&&a.routes)){h.warning("No versions were found");return;}j=a.routes;j.pop();if(!i&&!e){j=j.filter(function(l){return l.target.version.indexOf("-beta")===-1;});}j=j.map(function(l){var _=V(l.target.version),a1={};a1.patchVersion=_.getPatch();a1.groupTitle=_.getMajor()+"."+_.getMinor();a1.version=_.toString();a1.path=l.path;return a1;});return j;},_requestVersionInfo:function(){Promise.all([q.ajax(N),q.ajax(w)]).then(function(a){var b=this._processNeoAppJSON(a[0]),e=this._processVersionOverview(a[1]);if(Array.isArray(b)){b=b.filter(function(i){return e.indexOf(i.version)===-1;});this._aNeoAppVersions=b;this._updateVersionSwitchVisibility();}else{h.warning("No multi-version environment detected");}}.bind(this),function(){h.warning("No neo-app.json or versionoverview.json was detected");});},_getUI5Version:function(){return this.getModel("versionData").getProperty("/version");},_getUI5VersionGav:function(){return this.getModel("versionData").getProperty("/versionGav");},_getUI5Distribution:function(){var a=this._getUI5VersionGav();var b="SAPUI5";if(a&&/openui5/i.test(a)){b="OpenUI5";}return b;},_getCurrentPageRelativeURL:function(){var a=window.location;return a.pathname+a.hash+a.search;},_setHeaderSelectedKey:function(a){this._selectHeader.setSelectedKey(a);this._tabHeader.setSelectedKey(a);}});});
