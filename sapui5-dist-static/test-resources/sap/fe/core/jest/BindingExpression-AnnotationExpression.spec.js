sap.ui.define(["path", "sap/fe/test/JestTemplatingHelper", "sap/fe/core/converters/MetaModelConverter", "sap/fe/core/helpers/BindingExpression", "sap/ui/base/BindingParser"], function (path, JestTemplatingHelper, MetaModelConverter, BindingExpression, BindingParser) {
  "use strict";

  var compileBinding = BindingExpression.compileBinding;
  var annotationExpression = BindingExpression.annotationExpression;
  var convertTypes = MetaModelConverter.convertTypes;
  var getMetaModel = JestTemplatingHelper.getMetaModel;
  describe("Binding Expressions - Annotation Expression Support", function () {
    var convertedTypes;
    var entityType;
    var properties = {};
    beforeAll(function () {
      try {
        return Promise.resolve(getMetaModel(path.resolve(__dirname, "data", "BindingExpression-AnnotationExpression.xml"))).then(function (metaModel) {
          convertedTypes = convertTypes(metaModel);
          var maybeEntityType = convertedTypes.entityTypes.find(function (et) {
            return et.name === "Items";
          });

          if (maybeEntityType) {
            entityType = maybeEntityType;
            entityType.entityProperties.forEach(function (prop) {
              properties[prop.name] = prop;
            });
          } else {
            throw new Error("Error in test setup");
          }
        });
      } catch (e) {
        return Promise.reject(e);
      }
    });
    it("Basic tests", function () {
      var _properties$constantV, _properties$pathValue;

      expect(compileBinding(annotationExpression((_properties$constantV = properties.constantValue.annotations.UI) === null || _properties$constantV === void 0 ? void 0 : _properties$constantV.Hidden))).toEqual("true");
      expect(compileBinding(annotationExpression((_properties$pathValue = properties.pathValue.annotations.UI) === null || _properties$pathValue === void 0 ? void 0 : _properties$pathValue.Hidden))).toEqual("{constantValue}");
    });
    it("Concat tests", function () {
      var _properties$concatVal, _properties$concatPat, _properties$concatIfV, _properties$ifValue$a, _properties$ifConcatV;

      expect(compileBinding(annotationExpression((_properties$concatVal = properties.concatValue.annotations.Common) === null || _properties$concatVal === void 0 ? void 0 : _properties$concatVal.Text))).toEqual("YoLo");
      expect(compileBinding(annotationExpression((_properties$concatPat = properties.concatPathValue.annotations.Common) === null || _properties$concatPat === void 0 ? void 0 : _properties$concatPat.Text))).toEqual("{= 'Yo' + %{constantValue} + 'Lo' }");
      expect(compileBinding(annotationExpression((_properties$concatIfV = properties.concatIfValue.annotations.Common) === null || _properties$concatIfV === void 0 ? void 0 : _properties$concatIfV.Text))).toEqual("{= 'Yo' + (%{constantValue} === 'Yolo' ? 'Lo' : 'NotLo') }");
      expect(compileBinding(annotationExpression((_properties$ifValue$a = properties.ifValue.annotations.Common) === null || _properties$ifValue$a === void 0 ? void 0 : _properties$ifValue$a.Text))).toEqual("{= %{constantValue} === 'Yolo' ? 'true' : 'false'}");
      expect(compileBinding(annotationExpression((_properties$ifConcatV = properties.ifConcatValue.annotations.Common) === null || _properties$ifConcatV === void 0 ? void 0 : _properties$ifConcatV.Text))).toEqual("{= %{constantValue} === 'Yo' + %{pathValue} ? 'True' : 'False'}");
    });
    it("Concat Value tests", function () {
      var _properties$concatPat2, _properties$concatIfV2, _properties$ifValue$a2, _properties$ifConcatV2;

      var concatPathValue = compileBinding(annotationExpression((_properties$concatPat2 = properties.concatPathValue.annotations.Common) === null || _properties$concatPat2 === void 0 ? void 0 : _properties$concatPat2.Text));
      var concatPathValueExpression = BindingParser.complexParser(concatPathValue);
      expect(concatPathValueExpression.formatter("John")).toEqual("YoJohnLo");
      var concatIfValue = compileBinding(annotationExpression((_properties$concatIfV2 = properties.concatIfValue.annotations.Common) === null || _properties$concatIfV2 === void 0 ? void 0 : _properties$concatIfV2.Text));
      var concatIfValueExpression = BindingParser.complexParser(concatIfValue);
      expect(concatIfValueExpression.formatter("Yolo")).toEqual("YoLo");
      expect(concatIfValueExpression.formatter("NotYolo")).toEqual("YoNotLo");
      var ifValue = compileBinding(annotationExpression((_properties$ifValue$a2 = properties.ifValue.annotations.Common) === null || _properties$ifValue$a2 === void 0 ? void 0 : _properties$ifValue$a2.Text));
      var ifValueExpression = BindingParser.complexParser(ifValue);
      expect(ifValueExpression.formatter("Yolo")).toEqual("true");
      expect(ifValueExpression.formatter("NotYolo")).toEqual("false");
      var ifConcatValue = compileBinding(annotationExpression((_properties$ifConcatV2 = properties.ifConcatValue.annotations.Common) === null || _properties$ifConcatV2 === void 0 ? void 0 : _properties$ifConcatV2.Text));
      var ifConcatValueExpression = BindingParser.complexParser(ifConcatValue);
      expect(ifConcatValueExpression.formatter("John", "Doe")).toEqual("False");
      expect(ifConcatValueExpression.formatter("YoDoe", "Doe")).toEqual("True");
    });
  });
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJpbmRpbmdFeHByZXNzaW9uLUFubm90YXRpb25FeHByZXNzaW9uLnNwZWMudHMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJjb252ZXJ0ZWRUeXBlcyIsImVudGl0eVR5cGUiLCJwcm9wZXJ0aWVzIiwiYmVmb3JlQWxsIiwiZ2V0TWV0YU1vZGVsIiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJtZXRhTW9kZWwiLCJjb252ZXJ0VHlwZXMiLCJtYXliZUVudGl0eVR5cGUiLCJlbnRpdHlUeXBlcyIsImZpbmQiLCJldCIsIm5hbWUiLCJlbnRpdHlQcm9wZXJ0aWVzIiwiZm9yRWFjaCIsInByb3AiLCJFcnJvciIsIml0IiwiZXhwZWN0IiwiY29tcGlsZUJpbmRpbmciLCJhbm5vdGF0aW9uRXhwcmVzc2lvbiIsImNvbnN0YW50VmFsdWUiLCJhbm5vdGF0aW9ucyIsIlVJIiwiSGlkZGVuIiwidG9FcXVhbCIsInBhdGhWYWx1ZSIsImNvbmNhdFZhbHVlIiwiQ29tbW9uIiwiVGV4dCIsImNvbmNhdFBhdGhWYWx1ZSIsImNvbmNhdElmVmFsdWUiLCJpZlZhbHVlIiwiaWZDb25jYXRWYWx1ZSIsImNvbmNhdFBhdGhWYWx1ZUV4cHJlc3Npb24iLCJCaW5kaW5nUGFyc2VyIiwiY29tcGxleFBhcnNlciIsImZvcm1hdHRlciIsImNvbmNhdElmVmFsdWVFeHByZXNzaW9uIiwiaWZWYWx1ZUV4cHJlc3Npb24iLCJpZkNvbmNhdFZhbHVlRXhwcmVzc2lvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU9BQSxFQUFBQSxRQUFRLENBQUMscURBQUQsRUFBd0QsWUFBVztBQUMxRSxRQUFJQyxjQUFKO0FBQ0EsUUFBSUMsVUFBSjtBQUNBLFFBQU1DLFVBQW9DLEdBQUcsRUFBN0M7QUFDQUMsSUFBQUEsU0FBUztBQUFBLFVBQWE7QUFBQSwrQkFDR0MsWUFBWSxDQUFDQyxJQUFJLENBQUNDLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixNQUF4QixFQUFnQyw0Q0FBaEMsQ0FBRCxDQURm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QUdkLGNBQWMsQ0FBQ0Msb0JBQW9CLDJCQUFDcEIsVUFBVSxDQUFDaUMsYUFBWCxDQUF5QlgsV0FBekIsQ0FBcUNNLE1BQXRDLDJEQUFDLHVCQUE2Q0MsSUFBOUMsQ0FBckIsQ0FBcEM7QUFDQSxVQUFNVyx1QkFBdUIsR0FBR0wsYUFBYSxDQUFDQyxhQUFkLENBQTRCSCxhQUE1QixDQUFoQztBQUNBZixNQUFBQSxNQUFNLENBQUNzQix1QkFBdUIsQ0FBQ0gsU0FBeEIsQ0FBa0MsTUFBbEMsRUFBMEMsS0FBMUMsQ0FBRCxDQUFOLENBQXlEWixPQUF6RCxDQUFpRSxPQUFqRTtBQUNBUCxNQUFBQSxNQUFNLENBQUNzQix1QkFBdUIsQ0FBQ0gsU0FBeEIsQ0FBa0MsT0FBbEMsRUFBMkMsS0FBM0MsQ0FBRCxDQUFOLENBQTBEWixPQUExRCxDQUFrRSxNQUFsRTtBQUNBLEtBbkJDLENBQUY7QUFvQkEsR0EzRE8sQ0FBUiIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGdldE1ldGFNb2RlbCB9IGZyb20gXCJzYXAvZmUvdGVzdC9KZXN0VGVtcGxhdGluZ0hlbHBlclwiO1xuaW1wb3J0IHsgY29udmVydFR5cGVzIH0gZnJvbSBcInNhcC9mZS9jb3JlL2NvbnZlcnRlcnMvTWV0YU1vZGVsQ29udmVydGVyXCI7XG5pbXBvcnQgeyBFbnRpdHlUeXBlLCBQcm9wZXJ0eSB9IGZyb20gXCJAc2FwLXV4L2Fubm90YXRpb24tY29udmVydGVyXCI7XG5pbXBvcnQgeyBhbm5vdGF0aW9uRXhwcmVzc2lvbiwgY29tcGlsZUJpbmRpbmcgfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9CaW5kaW5nRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgQmluZGluZ1BhcnNlciB9IGZyb20gXCJzYXAvdWkvYmFzZVwiO1xuXG5kZXNjcmliZShcIkJpbmRpbmcgRXhwcmVzc2lvbnMgLSBBbm5vdGF0aW9uIEV4cHJlc3Npb24gU3VwcG9ydFwiLCBmdW5jdGlvbigpIHtcblx0bGV0IGNvbnZlcnRlZFR5cGVzO1xuXHRsZXQgZW50aXR5VHlwZTogRW50aXR5VHlwZTtcblx0Y29uc3QgcHJvcGVydGllczogUmVjb3JkPHN0cmluZywgUHJvcGVydHk+ID0ge307XG5cdGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3QgbWV0YU1vZGVsID0gYXdhaXQgZ2V0TWV0YU1vZGVsKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiZGF0YVwiLCBcIkJpbmRpbmdFeHByZXNzaW9uLUFubm90YXRpb25FeHByZXNzaW9uLnhtbFwiKSk7XG5cdFx0Y29udmVydGVkVHlwZXMgPSBjb252ZXJ0VHlwZXMobWV0YU1vZGVsKTtcblx0XHRjb25zdCBtYXliZUVudGl0eVR5cGUgPSBjb252ZXJ0ZWRUeXBlcy5lbnRpdHlUeXBlcy5maW5kKGV0ID0+IGV0Lm5hbWUgPT09IFwiSXRlbXNcIik7XG5cdFx0aWYgKG1heWJlRW50aXR5VHlwZSkge1xuXHRcdFx0ZW50aXR5VHlwZSA9IG1heWJlRW50aXR5VHlwZTtcblx0XHRcdGVudGl0eVR5cGUuZW50aXR5UHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuXHRcdFx0XHRwcm9wZXJ0aWVzW3Byb3AubmFtZV0gPSBwcm9wO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkVycm9yIGluIHRlc3Qgc2V0dXBcIik7XG5cdFx0fVxuXHR9KTtcblxuXHRpdChcIkJhc2ljIHRlc3RzXCIsICgpID0+IHtcblx0XHRleHBlY3QoY29tcGlsZUJpbmRpbmcoYW5ub3RhdGlvbkV4cHJlc3Npb24ocHJvcGVydGllcy5jb25zdGFudFZhbHVlLmFubm90YXRpb25zLlVJPy5IaWRkZW4pKSkudG9FcXVhbChcInRydWVcIik7XG5cdFx0ZXhwZWN0KGNvbXBpbGVCaW5kaW5nKGFubm90YXRpb25FeHByZXNzaW9uKHByb3BlcnRpZXMucGF0aFZhbHVlLmFubm90YXRpb25zLlVJPy5IaWRkZW4pKSkudG9FcXVhbChcIntjb25zdGFudFZhbHVlfVwiKTtcblx0fSk7XG5cblx0aXQoXCJDb25jYXQgdGVzdHNcIiwgKCkgPT4ge1xuXHRcdGV4cGVjdChjb21waWxlQmluZGluZyhhbm5vdGF0aW9uRXhwcmVzc2lvbihwcm9wZXJ0aWVzLmNvbmNhdFZhbHVlLmFubm90YXRpb25zLkNvbW1vbj8uVGV4dCkpKS50b0VxdWFsKFwiWW9Mb1wiKTtcblx0XHRleHBlY3QoY29tcGlsZUJpbmRpbmcoYW5ub3RhdGlvbkV4cHJlc3Npb24ocHJvcGVydGllcy5jb25jYXRQYXRoVmFsdWUuYW5ub3RhdGlvbnMuQ29tbW9uPy5UZXh0KSkpLnRvRXF1YWwoXG5cdFx0XHRcIns9ICdZbycgKyAle2NvbnN0YW50VmFsdWV9ICsgJ0xvJyB9XCJcblx0XHQpO1xuXHRcdGV4cGVjdChjb21waWxlQmluZGluZyhhbm5vdGF0aW9uRXhwcmVzc2lvbihwcm9wZXJ0aWVzLmNvbmNhdElmVmFsdWUuYW5ub3RhdGlvbnMuQ29tbW9uPy5UZXh0KSkpLnRvRXF1YWwoXG5cdFx0XHRcIns9ICdZbycgKyAoJXtjb25zdGFudFZhbHVlfSA9PT0gJ1lvbG8nID8gJ0xvJyA6ICdOb3RMbycpIH1cIlxuXHRcdCk7XG5cdFx0ZXhwZWN0KGNvbXBpbGVCaW5kaW5nKGFubm90YXRpb25FeHByZXNzaW9uKHByb3BlcnRpZXMuaWZWYWx1ZS5hbm5vdGF0aW9ucy5Db21tb24/LlRleHQpKSkudG9FcXVhbChcblx0XHRcdFwiez0gJXtjb25zdGFudFZhbHVlfSA9PT0gJ1lvbG8nID8gJ3RydWUnIDogJ2ZhbHNlJ31cIlxuXHRcdCk7XG5cdFx0ZXhwZWN0KGNvbXBpbGVCaW5kaW5nKGFubm90YXRpb25FeHByZXNzaW9uKHByb3BlcnRpZXMuaWZDb25jYXRWYWx1ZS5hbm5vdGF0aW9ucy5Db21tb24/LlRleHQpKSkudG9FcXVhbChcblx0XHRcdFwiez0gJXtjb25zdGFudFZhbHVlfSA9PT0gJ1lvJyArICV7cGF0aFZhbHVlfSA/ICdUcnVlJyA6ICdGYWxzZSd9XCJcblx0XHQpO1xuXHR9KTtcblxuXHRpdChcIkNvbmNhdCBWYWx1ZSB0ZXN0c1wiLCAoKSA9PiB7XG5cdFx0Y29uc3QgY29uY2F0UGF0aFZhbHVlID0gY29tcGlsZUJpbmRpbmcoYW5ub3RhdGlvbkV4cHJlc3Npb24ocHJvcGVydGllcy5jb25jYXRQYXRoVmFsdWUuYW5ub3RhdGlvbnMuQ29tbW9uPy5UZXh0KSk7XG5cdFx0Y29uc3QgY29uY2F0UGF0aFZhbHVlRXhwcmVzc2lvbiA9IEJpbmRpbmdQYXJzZXIuY29tcGxleFBhcnNlcihjb25jYXRQYXRoVmFsdWUpO1xuXHRcdGV4cGVjdChjb25jYXRQYXRoVmFsdWVFeHByZXNzaW9uLmZvcm1hdHRlcihcIkpvaG5cIikpLnRvRXF1YWwoXCJZb0pvaG5Mb1wiKTtcblxuXHRcdGNvbnN0IGNvbmNhdElmVmFsdWUgPSBjb21waWxlQmluZGluZyhhbm5vdGF0aW9uRXhwcmVzc2lvbihwcm9wZXJ0aWVzLmNvbmNhdElmVmFsdWUuYW5ub3RhdGlvbnMuQ29tbW9uPy5UZXh0KSk7XG5cdFx0Y29uc3QgY29uY2F0SWZWYWx1ZUV4cHJlc3Npb24gPSBCaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXIoY29uY2F0SWZWYWx1ZSk7XG5cdFx0ZXhwZWN0KGNvbmNhdElmVmFsdWVFeHByZXNzaW9uLmZvcm1hdHRlcihcIllvbG9cIikpLnRvRXF1YWwoXCJZb0xvXCIpO1xuXHRcdGV4cGVjdChjb25jYXRJZlZhbHVlRXhwcmVzc2lvbi5mb3JtYXR0ZXIoXCJOb3RZb2xvXCIpKS50b0VxdWFsKFwiWW9Ob3RMb1wiKTtcblxuXHRcdGNvbnN0IGlmVmFsdWUgPSBjb21waWxlQmluZGluZyhhbm5vdGF0aW9uRXhwcmVzc2lvbihwcm9wZXJ0aWVzLmlmVmFsdWUuYW5ub3RhdGlvbnMuQ29tbW9uPy5UZXh0KSk7XG5cdFx0Y29uc3QgaWZWYWx1ZUV4cHJlc3Npb24gPSBCaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXIoaWZWYWx1ZSk7XG5cdFx0ZXhwZWN0KGlmVmFsdWVFeHByZXNzaW9uLmZvcm1hdHRlcihcIllvbG9cIikpLnRvRXF1YWwoXCJ0cnVlXCIpO1xuXHRcdGV4cGVjdChpZlZhbHVlRXhwcmVzc2lvbi5mb3JtYXR0ZXIoXCJOb3RZb2xvXCIpKS50b0VxdWFsKFwiZmFsc2VcIik7XG5cblx0XHRjb25zdCBpZkNvbmNhdFZhbHVlID0gY29tcGlsZUJpbmRpbmcoYW5ub3RhdGlvbkV4cHJlc3Npb24ocHJvcGVydGllcy5pZkNvbmNhdFZhbHVlLmFubm90YXRpb25zLkNvbW1vbj8uVGV4dCkpO1xuXHRcdGNvbnN0IGlmQ29uY2F0VmFsdWVFeHByZXNzaW9uID0gQmluZGluZ1BhcnNlci5jb21wbGV4UGFyc2VyKGlmQ29uY2F0VmFsdWUpO1xuXHRcdGV4cGVjdChpZkNvbmNhdFZhbHVlRXhwcmVzc2lvbi5mb3JtYXR0ZXIoXCJKb2huXCIsIFwiRG9lXCIpKS50b0VxdWFsKFwiRmFsc2VcIik7XG5cdFx0ZXhwZWN0KGlmQ29uY2F0VmFsdWVFeHByZXNzaW9uLmZvcm1hdHRlcihcIllvRG9lXCIsIFwiRG9lXCIpKS50b0VxdWFsKFwiVHJ1ZVwiKTtcblx0fSk7XG59KTtcbiJdfQ==