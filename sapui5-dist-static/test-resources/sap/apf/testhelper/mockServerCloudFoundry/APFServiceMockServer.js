sap.ui.define([
    "sap/ui/core/util/MockServer"
], function(MockServer) {
    "use strict";

    var CUSTOMERCONTENT = "/sap/apf/design-time/customer-content/v1/";

    function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
      }

    return {
        /**
         * Initializes the mock server.
         * You can configure the delay with the URL parameter "serverDelay".
         * The local mock data in this folder is returned instead of the real data for testing.
         * @param {Boolean?} failing Set to true if the Mockserver should not send successful responses. Defaults to false.
         * @public
         */
        init: function(failing) {
            var returnCode = 200;
            if (failing) {
                returnCode = 500;
            }
            /* Application-List */
            this.mockAPFService = new MockServer({
                rootUri: CUSTOMERCONTENT,
                requests: [
                    {
                        method: "GET",
                        path: escapeRegExp("Applications?$select=Application,ApplicationName"),
                        response: function(xhr) {
                            xhr.respondJSON(returnCode, {},{"applications":[{"application":"57FCA36EC3D350DEE10000000A442AF5","applicationName":"APF Demo Kit Application"}]});
                        }
                    },
                    {
                        method: "GET",
                        path: escapeRegExp("TextFileAndAnalyticalConfigurations?$select=AnalyticalConfiguration,AnalyticalConfigurationName,SerializedAnalyticalConfiguration&$filter=(Application%20eq%20%2757FCA36EC3D350DEE10000000A442AF5%27)"),
                        response: function(xhr) {
                            xhr.respondJSON(returnCode, {},{"analyticalConfigurations":[{"analyticalConfiguration":"15184393783558433132010203955379","analyticalConfigurationName":"SCP End to End","serializedAnalyticalConfiguration":"{\"analyticalConfigurationName\":\"SCP End to End\",\"applicationTitle\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184311117411255647557594069640\"},\"steps\":[{\"type\":\"step\",\"description\":\"Revenue by Product and Country\",\"request\":\"request-for-Step-1\",\"binding\":\"binding-for-Step-1\",\"id\":\"Step-1\",\"title\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184315409139750832800129374892\"},\"navigationTargets\":[]}],\"requests\":[{\"type\":\"request\",\"id\":\"request-for-Step-1\",\"service\":\"/destination/testdestination1/sap/opu/odata/iwfnd/catalogservice;v=2/\",\"entitySet\":\"CAPF_FLIGHT\",\"selectProperties\":[\"Amount\"]}],\"bindings\":[{\"type\":\"binding\",\"id\":\"binding-for-Step-1\",\"stepDescription\":\"Revenue by Product and Country\",\"requiredFilters\":[],\"representations\":[{\"id\":\"Step-1-Representation-1\",\"representationTypeId\":\"ColumnChart\",\"parameter\":{\"dimensions\":[{\"fieldName\":\"AirlineCode\",\"kind\":\"xAxis\",\"labelDisplayOption\":\"key\"}],\"measures\":[{\"fieldName\":\"Amount\",\"kind\":\"yAxis\"}],\"properties\":[],\"hierarchicalProperty\":[{}],\"alternateRepresentationTypeId\":\"TableRepresentation\",\"width\":{}}}]}],\"representationTypes\":[],\"categories\":[{\"type\":\"category\",\"description\":\"All Steps\",\"id\":\"Category-1\",\"label\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"582CF273286D6BFFE10000000A442AF5\"},\"steps\":[{\"type\":\"step\",\"id\":\"Step-1\"}]}],\"navigationTargets\":[],\"facetFilters\":[{\"type\":\"facetFilter\",\"description\":\"Currency\",\"id\":\"FacetFilter-1\",\"property\":\"Currency\",\"multiSelection\":\"false\",\"preselectionDefaults\":[],\"valueList\":[\"EUR\",\"USD\"],\"label\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184422566638193930619376847531\"},\"invisible\":false,\"hasAutomaticSelection\":\"true\",\"useSameRequestForValueHelpAndFilterResolution\":\"false\"}],\"configHeader\":{\"Application\":\"57FCA36EC3D350DEE10000000A442AF5\",\"AnalyticalConfiguration\":\"15184393783558433132010203955379\",\"AnalyticalConfigurationName\":\"SCP End to End\",\"CreationUTCDateTime\":null,\"LastChangeUTCDateTime\":null}}"}],"textFile":{"inDevelopmentLanguage":"#FIORI: insert Fiori-Id\n# __ldi.translation.uuid=57fca36e-c3d3-50de-e100-00000a442af5\n#ApfApplicationId=57FCA36EC3D350DEE10000000A442AF5\n\n#XTIT,100\n57FCA37CC3D350DEE10000000A442AF5=Revenue over Time\n# LastChangeDate=2016/11/09 14:09:22\n\n#XFLD,50\n57FCA395C3D350DEE10000000A442AF5=Currency\n# LastChangeDate=2016/11/09 14:20:18\n\n#XTIT,250\n57FCA4E2C3D350DEE10000000A442AF5=APF Standard Demo\n# LastChangeDate=2016/11/10 14:35:44\n\n#XFLD,50\n57FCA4EBC3D350DEE10000000A442AF5=Company Code\n# LastChangeDate=2016/11/10 14:41:40\n\n#XFLD,50\n57FCA4F1C3D350DEE10000000A442AF5=Country\n# LastChangeDate=2016/11/10 14:43:24\n\n#XFLD,50\n57FCA4F5C3D350DEE10000000A442AF5=Customer Group\n# LastChangeDate=2016/11/10 14:44:36\n\n#XFLD,50\n57FCA4FBC3D350DEE10000000A442AF5=Customer\n# LastChangeDate=2016/11/10 14:45:13\n\n#XTIT,60\n57FCA50FC3D350DEE10000000A442AF5=Customer\n# LastChangeDate=2016/11/10 14:50:51\n\n#XTIT,100\n57FCA515C3D350DEE10000000A442AF5=Revenue by Customer\n# LastChangeDate=2016/11/10 14:51:19\n\n#XFLD,25\n57FCA51BC3D350DEE10000000A442AF5=Revenue\n# LastChangeDate=2016/11/10 14:52:39\n\n#XFLD,25\n57FCA51FC3D350DEE10000000A442AF5=Customer\n# LastChangeDate=2016/11/10 14:52:43\n\n#XTIT,100\n57FCA52FC3D350DEE10000000A442AF5=Revenue by Customer over Time\n# LastChangeDate=2016/11/10 14:54:25\n\n#XFLD,25\n57FCA533C3D350DEE10000000A442AF5=Time\n# LastChangeDate=2016/11/10 14:55:34\n\n#XTIT,60\n57FCA587C3D350DEE10000000A442AF5=Time\n# LastChangeDate=2016/11/10 15:14:58\n\n#XTIT,100\n57FCA590C3D350DEE10000000A442AF5=Revenue by Customer and Month\n# LastChangeDate=2016/11/10 15:16:25\n\n#XFLD,25\n57FCA5B6C3D350DEE10000000A442AF5=Discount\n# LastChangeDate=2016/11/10 15:32:55\n\n#XTIT,60\n57FCA5E9C3D350DEE10000000A442AF5=Detailed Data\n# LastChangeDate=2016/11/10 15:50:03\n\n#XTIT,100\n57FCA5F7C3D350DEE10000000A442AF5=Detailed Data\n# LastChangeDate=2016/11/10 15:51:14\n\n#XTIT,100\n57FCA621C3D350DEE10000000A442AF5=Revenue and Discount - Detailed\n# LastChangeDate=2016/11/10 16:12:41\n\n#XFLD,25\n57FCA630C3D350DEE10000000A442AF5=Amount\n# LastChangeDate=2016/11/10 16:16:00\n\n#XTIT,100\n57FCA63CC3D350DEE10000000A442AF5=Revenue, Discount, and Shipping Costs by Month\n# LastChangeDate=2016/11/10 16:17:32\n\n#XTIT,100\n57FCA68AC3D350DEE10000000A442AF5=Revenue and Shipping Costs - Detailed\n# LastChangeDate=2016/11/10 16:48:56\n\n#XFLD,25\n57FCA68EC3D350DEE10000000A442AF5=Shipping Costs\n# LastChangeDate=2016/11/10 16:49:28\n\n#XTIT,100\n57FCA696C3D350DEE10000000A442AF5=Discount and Shipping Costs - Detailed\n# LastChangeDate=2016/11/10 16:49:48\n\n#XFLD,25\n582CF0DA286D6BFFE10000000A442AF5=Country\n# LastChangeDate=2016/11/16 13:43:21\n\n#XTIT,100\n582CF0DE286D6BFFE10000000A442AF5=Revenue by Country and Month\n# LastChangeDate=2016/11/16 13:43:55\n\n#XTIT,60\n582CF189286D6BFFE10000000A442AF5=Country\n# LastChangeDate=2016/11/16 15:40:50\n\n#XTIT,100\n582CF190286D6BFFE10000000A442AF5=Revenue by Country\n# LastChangeDate=2016/11/16 15:41:46\n\n#XTIT,100\n582CF1AA286D6BFFE10000000A442AF5=Discount by Country\n# LastChangeDate=2016/11/16 15:51:02\n\n#XTIT,100\n582CF1B7286D6BFFE10000000A442AF5=Shipping Costs by Country\n# LastChangeDate=2016/11/16 15:55:56\n\n#XTIT,100\n582CF1C1286D6BFFE10000000A442AF5=Revenue, Discount, and Shipping Costs by Country\n# LastChangeDate=2016/11/16 15:58:15\n\n#XTIT,100\n582CF1F5286D6BFFE10000000A442AF5=Discount and Shipping Costs by Customer\n# LastChangeDate=2016/11/16 16:42:55\n\n#XTIT,100\n582CF243286D6BFFE10000000A442AF5=Discount by Customer and Month\n# LastChangeDate=2016/11/16 17:26:45\n\n#XTIT,60\n582CF257286D6BFFE10000000A442AF5=Revenue\n# LastChangeDate=2016/11/16 17:37:55\n\n#XTIT,60\n582CF25B286D6BFFE10000000A442AF5=Discount\n# LastChangeDate=2016/11/16 17:38:18\n\n#XTIT,60\n582CF25F286D6BFFE10000000A442AF5=Shipping Costs\n# LastChangeDate=2016/11/16 17:38:31\n\n#XTIT,60\n582CF273286D6BFFE10000000A442AF5=All Steps\n# LastChangeDate=2016/11/16 17:54:01\n\n#XTIT,100\n14822374366121819634218359677717=Revenue by Country (with normal Service)\n# LastChangeDate=2016/11/16 17:54:01\n\n#XTIT,100\n14822374389411352084979829313687=Revenue by Country (with Hierarchy Service)\n# LastChangeDate=2016/11/16 17:54:01\n\n#XTIT,250\n14858784650039751216561611030127=APF Smart Filter Bar Demo\n# LastChangeDate=2017/01/31 17:02:23\n\n#XTIT,250\n14822380843323382109646873064048=APF Hierarchy Demo\n# LastChangeDate=2017/01/31 17:02:23\n\n#XTIT,80\n14998655205561312561637116321044=Currency Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998655468591080116939206010709=Shipping Costs\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998653507209401435790398465730=Currency\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998655078505897926830178603327=Year and Month\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654973841803358061607117468=Product Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654696299888808200129512867=Country\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654653622077363120109737296=Company Code Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654524391749750260102126556=Discount\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654430531727431348137129535=Product\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998652259301467785212271544619=Month\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998652293709247139600212095455=Customer\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654351676651232220531117371=Company Code\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998654071801237122177186160452=Date\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998652222454346841580163092475=Year\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998653363629622038810213652282=Customer Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998653198571430428175234187582=Customer Group Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998653104964720126290166825322=Country Name\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998653005891920551803724311210=Customer Group\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n14998652326179777222480117701560=Revenue\n# LastChangeDate=2017/07/12 15:27:32\n\n#XTIT,80\n15053049815106687677930186500838=Country\n# LastChangeDate=2017/09/13 14:17:26\n\n#XTIT,80\n15053049951111233616299921121549=Date\n# LastChangeDate=2017/09/13 14:17:26\n\n#XTIT,80\n15053049976392117373455981353248=Year and Month\n# LastChangeDate=2017/09/13 14:17:26\n\n#XTIT,80\n15053050151301676919357480678764=Customer\n# LastChangeDate=2017/09/13 14:17:26\n\n#XTIT,100\n15093557241602005072202808831609=Revenue by Product\n# LastChangeDate=2017/10/30 15:15:35\n\n#XTIT,100\n15093530149922931123940148935298=Revenue by Product and Month\n# LastChangeDate=2017/10/30 15:15:35\n\n#XFLD,25\n15093531167771607944640546793208=Product\n# LastChangeDate=2017/10/30 15:15:35\n\n#XTIT,60\n15093529629842078337740988406819=Product\n# LastChangeDate=2017/10/30 15:15:35\n\n#XTIT,100\n15102377857028838103150312430278=Revenue, Discount, and Shipping Costs by Month\n# LastChangeDate=2017/11/09 17:18:08\n\n#XTIT,100\n15102377963651508758254158996844=Revenue, Discount, and Shipping Costs by Country\n# LastChangeDate=2017/11/09 17:18:08\n\n#XTIT,100\n15102370883951657475286461234693=Discount by Customer\n# LastChangeDate=2017/11/09 17:18:08\n\n#XFLD,25\n15102377426421018326751208039995=Detailed Data\n# LastChangeDate=2017/11/09 17:18:08\n\n#XTIT,100\n15184315409139750832800129374892=Revenue by Product and Country\n# LastChangeDate=2018/02/12 14:32:01\n\n#XTIT,250\n15184311117411255647557594069640=SCP End to End\n# LastChangeDate=2018/02/12 14:32:01\n\n#XTIT,100\n15184315000831999657872109906883=Revenue by Product and Company\n# LastChangeDate=2018/02/12 14:32:01\n\n#XFLD,50\n15184422381831082934422201579228=FacetFilter\n# LastChangeDate=2018/02/12 14:32:01\n\n#XFLD,50\n15184422566638193930619376847531=Currency\n# LastChangeDate=2018/02/12 14:32:01\n\n"}});
                        }
                    },
                    {
                        method: "GET",
                        path: escapeRegExp("AnalyticalConfigurations/15184393783558433132010203955379?$select=AnalyticalConfigurationName,SerializedAnalyticalConfiguration"),
                        response: function(xhr) {
                            xhr.respondJSON(returnCode, {},{"analyticalConfiguration":{"analyticalConfigurationName":"SCP End to End","serializedAnalyticalConfiguration":"{\"analyticalConfigurationName\":\"SCP End to End\",\"applicationTitle\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184311117411255647557594069640\"},\"steps\":[{\"type\":\"step\",\"description\":\"Revenue by Product and Country\",\"request\":\"request-for-Step-1\",\"binding\":\"binding-for-Step-1\",\"id\":\"Step-1\",\"title\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184315409139750832800129374892\"},\"navigationTargets\":[]}],\"requests\":[{\"type\":\"request\",\"id\":\"request-for-Step-1\",\"service\":\"/destination/testdestination1/sap/opu/odata/iwfnd/catalogservice;v=2/\",\"entitySet\":\"CAPF_FLIGHT\",\"selectProperties\":[\"Amount\"]}],\"bindings\":[{\"type\":\"binding\",\"id\":\"binding-for-Step-1\",\"stepDescription\":\"Revenue by Product and Country\",\"requiredFilters\":[],\"representations\":[{\"id\":\"Step-1-Representation-1\",\"representationTypeId\":\"ColumnChart\",\"parameter\":{\"dimensions\":[{\"fieldName\":\"AirlineCode\",\"kind\":\"xAxis\",\"labelDisplayOption\":\"key\"}],\"measures\":[{\"fieldName\":\"Amount\",\"kind\":\"yAxis\"}],\"properties\":[],\"hierarchicalProperty\":[{}],\"alternateRepresentationTypeId\":\"TableRepresentation\",\"width\":{}}}]}],\"representationTypes\":[],\"categories\":[{\"type\":\"category\",\"description\":\"All Steps\",\"id\":\"Category-1\",\"label\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"582CF273286D6BFFE10000000A442AF5\"},\"steps\":[{\"type\":\"step\",\"id\":\"Step-1\"}]}],\"navigationTargets\":[],\"facetFilters\":[{\"type\":\"facetFilter\",\"description\":\"Currency\",\"id\":\"FacetFilter-1\",\"property\":\"Currency\",\"multiSelection\":\"false\",\"preselectionDefaults\":[],\"valueList\":[\"EUR\",\"USD\"],\"label\":{\"type\":\"label\",\"kind\":\"text\",\"key\":\"15184422566638193930619376847531\"},\"invisible\":false,\"hasAutomaticSelection\":\"true\",\"useSameRequestForValueHelpAndFilterResolution\":\"false\"}],\"configHeader\":{\"Application\":\"57FCA36EC3D350DEE10000000A442AF5\",\"AnalyticalConfiguration\":\"15184393783558433132010203955379\",\"AnalyticalConfigurationName\":\"SCP End to End\",\"CreationUTCDateTime\":null,\"LastChangeUTCDateTime\":null}}","application":null,"creationUtcDateTime":null,"lastChangeUtcDateTime":null,"serviceInstance":null}});
                        }
                    }
                ]
            });
            this.mockAPFService.start();
        }
    };

});
