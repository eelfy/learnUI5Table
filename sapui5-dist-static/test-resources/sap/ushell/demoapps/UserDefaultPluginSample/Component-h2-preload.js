//@ui5-bundle sap/ushell/demo/UserDefaultPluginSample/Component-h2-preload.js
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/demo/UserDefaultPluginSample/Component',["sap/base/Log","sap/ui/core/Component","sap/base/util/isEmptyObject","sap/ui/model/odata/v2/ODataModel"],function(L,C,i,O){"use strict";var U=C.extend("sap.ushell.demo.UserDefaultPluginSample.Component",{metadata:{manifest:"json"}});U.prototype.init=function(){var u=sap.ushell.Container.getService("UserDefaultParameters");u.registerPlugin(this);this.bLocalMode=this.oComponentData.config.localMode==="true";this.oPromises={};if(this.bLocalMode){this._setupTestData();}else{this.oModels={};this.oChangedUserDefaults={};this._setupKnownParametersConstant();u.attachValueStored(this.storeUserDefaults.bind(this));}};U.prototype.getUserDefault=function(p,c,s){var d=new jQuery.Deferred();if(!this.oManagedParameters.hasOwnProperty(p)||c&&c.value!==undefined){return d.resolve(c).promise();}this._getUserDefaultsPromise(s).then(function(u){if(!u.hasOwnProperty(p)){d.resolve(c);}else{var v=u[p].value;d.resolve(v);}}).catch(function(r){L.error("unable to resolve parameter"+p,this.getMetadata().getName());d.reject(r);}.bind(this));return d.promise();};U.prototype.getEditorMetadata=function(e,s){var d=new jQuery.Deferred();if(this.bLocalMode){this._getUserDefaultsPromise(s).then(function(u){Object.keys(this.oManagedParameters).forEach(function(P){if(e.hasOwnProperty(P)&&u.hasOwnProperty(P)){e[P].editorMetadata=u[P].editorMetadata;}});d.resolve(e);}.bind(this)).catch(function(r){L.error("Fatal error obtaining metadata for editing,","sap.ushell.demo.UserDefaultPluginSample.Component ");d.reject(r);});}else{for(var p in this.oManagedParameters){if(e.hasOwnProperty(p)){var g=this.oManagedParameters[p].groupId;e[p].editorMetadata={groupId:g,groupTitle:g,parameterIndex:this.oManagedParameters[p].parameterIndex,editorInfo:{odataURL:s.getFullyQualifiedXhrUrl("/sap/opu/odata/sap/FIN_USER_DEFAULTPARAMETER_SRV"),entityName:"Defaultparameter",propertyName:p,bindingPath:"/Defaultparameters('FIN')"}};}}d.resolve(e);}return d.promise();};U.prototype._retrieveUserDefaults=function(s){return new Promise(function(r,a){if(this.bLocalMode){var d=this.oTestData[s.id];if(d===undefined){d=this.oTestData[""]||{};}d=JSON.parse(JSON.stringify(d));r(d);}else{this._getUserDefaultsModel(s).read("/Defaultparameters(Template='FIN')",{success:function(D){for(var b in D){if(this.oManagedParameters[b]){this.oManagedParameters[b].value=D[b];}}r(this.oManagedParameters);}.bind(this),error:function(e){a(e.message);}});}}.bind(this));};U.prototype._getUserDefaultsPromise=function(s){var S=s.id;if(!this.oPromises[S]){this.oPromises[S]=this._retrieveUserDefaults(s);}return this.oPromises[S];};U.prototype.storeUserDefaults=function(e){return new Promise(function(r,a){var p=e.getParameters().parameterName,P=e.getParameters().parameterValue,s=e.getParameters().systemContext,R=true;if(this.oManagedParameters.hasOwnProperty(p)&&(!P.value||this.oManagedParameters[p].value!==P.value)){if(i(this.oChangedUserDefaults)){R=false;window.setTimeout(function(){this._getUserDefaultsModel(s).update("/Defaultparameters('FIN')",this.oChangedUserDefaults);this.oChangedUserDefaults={};r();}.bind(this),2000);}this.oChangedUserDefaults[p]=P.value||"";this.oManagedParameters[p].value=P.value;}if(R){r();}}.bind(this));};U.prototype._getUserDefaultsModel=function(s){if(!this.oModels[s.id]){var S=s.getFullyQualifiedXhrUrl("/sap/opu/odata/sap/FIN_USER_DEFAULTPARAMETER_SRV/");var r={metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"}};this.oModels[s.id]=new O(S,r);}return this.oModels[s.id];};U.prototype._setupTestData=function(){this.oManagedParameters={UshellSampleCompanyCode:true,UshellSamplePlant:true,UshellTest1:true,UshellTest2:true,UshellTest3:true,CommunityActivity:true,UshellSampleControllingArea:true,UshellSampleCostCenter:true,FirstName:true,LastName:true,ExtendedUserDefaultWithPlugin:true};this.oTestData={demoContentProvider1:{UshellTest1:{value:{value:"Default Value for demoContentProvider1"},editorMetadata:{displayText:"Test Default 1 (in demoContentProvider1)",description:"Description of the test default 1",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:1}},UshellSampleCostCenter:{value:{value:"1001"},editorMetadata:{displayText:"Cost center (in demoContentProvider1)",description:"This is the cost center",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:2}}},demoContentProvider2:{UshellSampleCostCenter:{value:{value:"1002"},editorMetadata:{displayText:"Cost center (in demoContentProvider2)",description:"This is the cost center",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:2}}},contentProviderUserDefaultsFirstSystem:{FirstName:{value:{value:"John"},editorMetadata:{displayText:"First Name",description:"First Name",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:1}}},"":{UshellSampleCompanyCode:{value:{value:"0815"},editorMetadata:{displayText:"Company code",description:"This is the company code",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:4,editorInfo:{odataURL:"/sap/opu/odata/sap/ZFIN_USER_DEFAULTPARAMETER_SRV",entityName:"Defaultparameter",propertyName:"CompanyCode",bindingPath:"/Defaultparameters('FIN')"}}},UshellSampleCostCenter:{value:{value:"1000"},editorMetadata:{displayText:"Cost center",description:"This is the cost center",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:2,editorInfo:{odataURL:"/sap/opu/odata/sap/ZFIN_USER_DEFAULTPARAMETER_SRV",entityName:"Defaultparameter",propertyName:"CostCenter",bindingPath:"/Defaultparameters('FIN')"}}},UshellSampleControllingArea:{value:{value:"0010"},editorMetadata:{displayText:"Controlling Area",description:"This is the controlling Area",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:3,editorInfo:{odataURL:"/sap/opu/odata/sap/ZFIN_USER_DEFAULTPARAMETER_SRV",entityName:"Defaultparameter",propertyName:"ControllingArea",bindingPath:"/Defaultparameters('FIN')"}}},UshellTest1:{value:{value:"InitialFromPlugin"},editorMetadata:{displayText:"Test Default 1",description:"Description of the test default 1",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:1}},UshellTest2:{value:{value:undefined},editorMetadata:{displayText:"Test Default 2 ( no value)",description:"Description of the test default 2",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:2}},UshellTest3:{value:{},editorMetadata:{displayText:"Test Default 3 (extended and simple value)",description:"Description of the test default 3",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:3}},CommunityActivity:{value:{},editorMetadata:{displayText:"Community Activity",description:"Describes how active you are on JAM",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:10}},FirstName:{value:{value:"John"},editorMetadata:{displayText:"First Name",description:"Describes your first name",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:11}},LastName:{value:{},editorMetadata:{displayText:"Last Name",description:"Describes your last name",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:12}},ExtendedUserDefaultWithPlugin:{value:{value:"1000",extendedValue:{Ranges:[{Sign:"I",Option:"BT",Low:"0",High:"4000"}]}},editorMetadata:{displayText:"ExtendedUserDefaultWithPlugin",description:"Describes the value for ExtendedUserDefaultWithPlugin",groupId:"EXAMPLE-FIN-GRP1",groupTitle:"FIN User Defaults (UShell examples)",parameterIndex:13}},UshellSamplePlant:{value:{value:"Plant1000",noStore:true,noEdit:true},editorMetadata:{displayText:"Plant",description:"This is the plant code",groupTitle:"UserDefaultSamplePlugin group2",groupId:"SamplePlugin-GRP2",parameterIndex:1,editorInfo:{odataURL:"/sap/opu/odata/sap/ZMM_USER_DEFAULTPARAMETER_SRV",entityName:"Defaultparameter",propertyName:"Plant",bindingPath:"/Defaultparameters('MM')"}}}}};};U.prototype._setupKnownParametersConstant=function(){this.oManagedParameters={CompanyCode:{groupId:"FI",parameterIndex:1},ControllingArea:{groupId:"CO",parameterIndex:2},CollectionGroup:{groupId:"FSCM",parameterIndex:3},CollectionSegment:{groupId:"FSCM",parameterIndex:4},CollectionSpecialist:{groupId:"FSCM",parameterIndex:5},ActivityType:{groupId:"CO",parameterIndex:6},ActivityTypeGroup:{groupId:"CO",parameterIndex:7},AssetDepreciationArea:{groupId:"FI",parameterIndex:8},AssetClass:{groupId:"FI",parameterIndex:9},MasterFixedAsset:{groupId:"FI",parameterIndex:10},FixedAsset:{groupId:"FI",parameterIndex:11},BusinessArea:{groupId:"FI",parameterIndex:12},BusinessProcess:{groupId:"CO",parameterIndex:13},ChartOfAccounts:{groupId:"FI",parameterIndex:14},CostCenter:{groupId:"CO",parameterIndex:15},CostCenterGroup:{groupId:"CO",parameterIndex:16},CostElement:{groupId:"CO",parameterIndex:17},CostElementGroup:{groupId:"CO",parameterIndex:18},CostObject:{groupId:"CO",parameterIndex:19},CreditSegment:{groupId:"FSCM",parameterIndex:20},Customer:{groupId:"SD",parameterIndex:21},CustomerGroup:{groupId:"SD",parameterIndex:22},AccountingDocumentType:{groupId:"FI",parameterIndex:23},ExchangeRateType:{groupId:"FI",parameterIndex:24},FinancialStatementVariant:{groupId:"FI",parameterIndex:25},FiscalYear:{groupId:"FI",parameterIndex:26},LedgerFiscalYear:{groupId:"FI",parameterIndex:27},FunctionalArea:{groupId:"CO",parameterIndex:28},GLAccount:{groupId:"FI",parameterIndex:29},GLAccountGroup:{groupId:"FI",parameterIndex:30},Ledger:{groupId:"FI",parameterIndex:31},LedgerGroup:{groupId:"FI",parameterIndex:32},InternalOrder:{groupId:"CO",parameterIndex:33},Material:{groupId:"MM",parameterIndex:34},MaterialType:{groupId:"MM",parameterIndex:35},MaterialGroup:{groupId:"MM",parameterIndex:36},Plant:{groupId:"MM",parameterIndex:37},ProfitCenter:{groupId:"CO",parameterIndex:38},StatisticalKeyFigure:{groupId:"CO",parameterIndex:39},StatisticalKeyFigureGroup:{groupId:"CO",parameterIndex:40},TaxIsCalculatedAutomatically:{groupId:"FI",parameterIndex:41},ControlllingValuationType:{groupId:"CO",parameterIndex:42},Supplier:{groupId:"MM",parameterIndex:43},WBSElement:{groupId:"CO",parameterIndex:44},BankCountry:{groupId:"FSCM",parameterIndex:45},Bank:{groupId:"FSCM",parameterIndex:46},BankAccount:{groupId:"FSCM",parameterIndex:47},HouseBank:{groupId:"FSCM",parameterIndex:48},HouseBankAccount:{groupId:"FSCM",parameterIndex:49},Segment:{groupId:"FI",parameterIndex:50},Project:{groupId:"CO",parameterIndex:51},SalesOrder:{groupId:"SD",parameterIndex:52},SalesDocumentType:{groupId:"SD",parameterIndex:53},SalesOrderType:{groupId:"SD",parameterIndex:54},SalesOrganization:{groupId:"SD",parameterIndex:55},DistributionChannel:{groupId:"SD",parameterIndex:56},Division:{groupId:"SD",parameterIndex:57},SalesOffice:{groupId:"SD",parameterIndex:58},SalesGroup:{groupId:"SD",parameterIndex:59},DisplayCurrency:{groupId:"FI",parameterIndex:60},AssetAccountingKeyFigureSet:{groupId:"FI",parameterIndex:61},BillOfMaterialVariantUsage:{groupId:"PLM",parameterIndex:62},ChangeNumber:{groupId:"PLM",parameterIndex:63},SoldToParty:{groupId:"SD",parameterIndex:64},ShipToParty:{groupId:"SD",parameterIndex:65},BillToParty:{groupId:"SD",parameterIndex:66},PayerParty:{groupId:"SD",parameterIndex:67},ShippingPoint:{groupId:"LO",parameterIndex:68},StorageLocation:{groupId:"MM",parameterIndex:69},FinancialManagementArea:{groupId:"PSM",parameterIndex:70},Fund:{groupId:"PSM",parameterIndex:71},FundsCenter:{groupId:"PSM",parameterIndex:72},CommitmentItem:{groupId:"PSM",parameterIndex:73},FundedProgram:{groupId:"PSM",parameterIndex:74},BudgetPeriod:{groupId:"PSM",parameterIndex:75},BudgetEntryDocumentType:{groupId:"PSM",parameterIndex:76},BudgetVersion:{groupId:"PSM",parameterIndex:77},WorkCenter:{groupId:"MM",parameterIndex:78},PurchasingOrganization:{groupId:"MM",parameterIndex:79},PurchasingGroup:{groupId:"MM",parameterIndex:80},AccountAssignmentCategory:{groupId:"MM",parameterIndex:81},BOMExplosionApplication:{groupId:"PLM",parameterIndex:82},ResponsibleCostCenter:{groupId:"EPPM",parameterIndex:83},ProjectProfileCode:{groupId:"EPPM",parameterIndex:84},IsPeriodBasedBalanceReporting:{groupId:"FI",parameterIndex:85},Warehouse:{groupId:"MM",parameterIndex:86},WarehouseWorkCenter:{groupId:"MM",parameterIndex:87},LglCntntMContext:{groupId:"LCM",parameterIndex:88},LglCntntMLanguage:{groupId:"LCM",parameterIndex:89},LglCntntMGovLaw:{groupId:"LCM",parameterIndex:90},LglCntntMMainOrgCoCode:{groupId:"LCM",parameterIndex:91},LglCntntMMainOrgSalesOrg:{groupId:"LCM",parameterIndex:92},LglCntntMMainOrgPurOrg:{groupId:"LCM",parameterIndex:93},TreasuryValuationArea:{groupId:"FSCM",parameterIndex:94},AccountingPrinciple:{groupId:"FI",parameterIndex:95},OperatingConcern:{groupId:"CO",parameterIndex:96},ServiceDocumentType:{groupId:"CRM",parameterIndex:97},GLAccountHierarchy:{groupId:"FI",parameterIndex:98},PlanningCategory:{groupId:"CO",parameterIndex:99},GrantID:{groupId:"PSM",parameterIndex:100},TechnicalObject:{groupId:"PLM",parameterIndex:101},NotificationType:{groupId:"PLM",parameterIndex:102},OrderType:{groupId:"PLM",parameterIndex:103},MaintenancePlanningPlant:{groupId:"PLM",parameterIndex:104},MaintenancePlant:{groupId:"PLM",parameterIndex:105}};};return U;});
sap.ui.require.preload({
	"sap/ushell/demo/UserDefaultPluginSample/manifest.json":'{"_version":"1.4.0","sap.cloud":{"public":true,"service":"com.sap.sample.app"},"sap.app":{"_version":"1.1.0","i18n":"messagebundle.properties","id":"sap.ushell.demo.UserDefaultPluginSample","type":"component","title":"{{title}}","description":"{{description}}","applicationVersion":{"version":"1.1.0"},"ach":"CA-UI2-INT-FE","crossNavigation":{"inbounds":{"Shell-plugin":{"semanticObject":"Shell","action":"plugin","signature":{},"additionalParameters":"allowed"}}}},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.demo.UserDefaultPluginSample","dependencies":{"minUI5Version":"1.28","libs":{"sap.m":{"minVersion":"1.28"}}},"contentDensities":{"compact":true,"cozy":true}},"sap.flp":{"type":"plugin"}}'
},"sap/ushell/demo/UserDefaultPluginSample/Component-h2-preload"
);
sap.ui.loader.config({depCacheUI5:{
"sap/ushell/demo/UserDefaultPluginSample/Component.js":["sap/base/Log.js","sap/base/util/isEmptyObject.js","sap/ui/core/Component.js","sap/ui/model/odata/v2/ODataModel.js"]
}});
//# sourceMappingURL=Component-h2-preload.js.map