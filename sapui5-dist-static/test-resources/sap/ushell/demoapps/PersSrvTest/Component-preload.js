//@ui5-bundle sap/ushell/demo/PersSrvTest/Component-preload.js
sap.ui.require.preload({
	"sap/ushell/demo/PersSrvTest/AddItemDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog title="Add Container Item" class="sapContrastPlus"><content><Input value="{Key}" type="Text" placeholder="Enter item key"/><Input value="{Value}" type="Text" placeholder="Enter item value"/><CheckBox text="JSON" tooltip="Save as object in JSON format" selected="{JSON}"/></content><beginButton><Button text="OK" press="onAddItemOK"/></beginButton><endButton><Button text="Cancel" press="onDialogClose"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/demo/PersSrvTest/App.controller.js":function(){
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.m.MessageBox");sap.ui.controller("sap.ushell.demo.PersSrvTest.App",{onInit:function(){this.oPersonalizationService=sap.ushell.Container.getService("Personalization");this.oModel=new sap.ui.model.json.JSONModel({"ContainerName":"","ContainerValidity":"","ContainerItems":[],"ContainerLoaded":false,"NewItem":{}});this.getView().setModel(this.oModel);},getMyComponent:function(){return sap.ui.core.Component.getOwnerComponentFor(this.getView());},onNewEmptyContainer:function(){var t=this,c=this.oModel.getProperty("/ContainerName");if(!c){sap.m.MessageBox.alert("Enter a container name");return;}this.oPersonalizationService.createEmptyContainer(c,{validity:this._getContainerValidity()},this.getMyComponent()).done(function(C){jQuery.sap.log.info("Created new container '"+c+"'");if(C){t.oContainer=C;t.oModel.setProperty("/ContainerLoaded",true);t.oModel.setProperty("/ContainerItems",[]);}}).fail(function(e){jQuery.sap.log.error("Failed to create container '"+c+"': "+e);sap.m.MessageBox.alert("Failed to create container '"+c+"': "+e);});},onLoadContainer:function(){var t=this,c=this.oModel.getProperty("/ContainerName"),i,I,v,s,j,C=[];if(!c){sap.m.MessageBox.alert("Enter a container name");return;}this.oPersonalizationService.getContainer(c,{validity:this._getContainerValidity()},this.getMyComponent()).done(function(o){jQuery.sap.log.info("Loaded container '"+c+"': "+(o?o.toString():o));if(o){t.oContainer=o;t.oModel.setProperty("/ContainerLoaded",true);I=o.getItemKeys();for(i=0;i<I.length;i=i+1){v=o.getItemValue(I[i]);if(typeof v==="string"){s=v;j=false;}else{s=JSON.stringify(v);j=true;}C[i]={Key:I[i],Value:s,JSON:j};}t.oModel.setProperty("/ContainerItems",C);}}).fail(function(e){jQuery.sap.log.error("Failed to load container '"+c+"': "+e);sap.m.MessageBox.alert("Failed to load container '"+c+"': "+e);});},onSaveContainer:function(){var c=this.oModel.getProperty("/ContainerName"),i,I,v,s,j,C=[];this._assertContainerExists();C=this.oModel.getProperty("/ContainerItems");for(i=0;i<C.length;i=i+1){I=C[i].Key;s=C[i].Value;j=C[i].JSON;if(j){try{v=JSON.parse(s);}catch(e){sap.m.MessageBox.alert("Value for item '"+I+"' must be a valid JSON string; "+e);return;}}else{v=s;}this.oContainer.setItemValue(I,v);}this.oContainer.save().done(function(){}).fail(function(E){jQuery.sap.log.error("Failed to save container '"+c+"': "+E);sap.m.MessageBox.alert("Failed to save container '"+c+"': "+E);});},onLargePayload:function(){var i,s,a="",S,v,V,r,c=[];c=this.oModel.getProperty("/ContainerItems");function f(b,I){var d=-1;d=c.reduce(function(p,g,i){if(c[i].Key===b){return i;}return p;},-1);if(d>=0){return d;}c.push({Key:b,Value:I});return c.length-1;}S=f("size",256);v=f("value","");V=f("verify","false");try{r=parseInt(c[S].Value,10);}catch(e){}if(r>=0){c[V].Value=(c[v].Value.length===r);}if(r>=0){s="01234567890ABCDEFGHIJKLMNOPQURSTUVXYZ";for(i=0;i<r&&a.length<=r;i=i+1){a=a+">>>"+a.length+"<<<"+s;}a=a.substring(0,r);c[v].Value=a;}this.oModel.setProperty("/ContainerItems",c);},onDeleteContainer:function(){var t=this,c=this.oModel.getProperty("/ContainerName");if(!c){sap.m.MessageBox.alert("Enter a container name");return;}sap.m.MessageBox.show("Deleting container '"+c+"'",{icon:"sap-icon://hint",title:"Confirm Deletion",actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a===sap.m.MessageBox.Action.OK){t._deleteContainer(c);}else{jQuery.sap.log.debug("Deletion of container '"+c+"' canceled");}}});},_deleteContainer:function(c){var t=this;this.oPersonalizationService.delContainer(c,{validity:this._getContainerValidity()},this.getMyComponent()).done(function(C){sap.m.MessageToast.show("Container '"+c+"' deleted");t.oModel.setProperty("/ContainerItems",[]);}).fail(function(e){jQuery.sap.log.error("Failed to load container '"+c+"': "+e);sap.m.MessageBox.alert("Failed to load container '"+c+"': "+e);});},onOpenAddItemDialog:function(){if(!this.addItemDialog){this.addItemDialog=sap.ui.xmlfragment("sap.ushell.demo.PersSrvTest.AddItemDialog",this);this.getView().addDependent(this.addItemDialog);}this.addItemDialog.bindElement("/NewItem");this.addItemDialog.open();},onAddItemOK:function(e){var n=this.oModel.getProperty("/NewItem"),c=this.oModel.getProperty("/ContainerItems");c.push({Key:n.Key,Value:n.Value,JSON:n.JSON});this.oModel.setProperty("/ContainerItems",c);e.getSource().getParent().close();},onRemoveAllItems:function(){this._assertContainerExists();this.oContainer.clear();this.oModel.setProperty("/ContainerItems",[]);},onRemoveSingleItem:function(e){var b=e.getSource().getBindingContext(),I=b.getObject(),m,i,c=this.oModel.getProperty("/ContainerItems");this._assertContainerExists();m=/\/ContainerItems\/(\d)/.exec(b.getPath());if(!m){jQuery.sap.log.error("Internal error: expected binding context for table rows: "+b.getPath());}i=parseInt(m[1],10);c.splice(i,1);this.oModel.setProperty("/ContainerItems",c);this.oContainer.delItem(I.Key);},onDialogClose:function(e){e.getSource().getParent().close();},_assertContainerExists:function(){if(!this.oContainer){jQuery.sap.log.error("Illegal state: save container called but no container exists");sap.m.MessageBox.alert("Illegal state: save container called but no container exists");return;}},_clearContainerWorkaround:function(){var i,I=this.oContainer.getItemKeys();for(i=0;i<I.length;i=i+1){this.oContainer.delItem(I[i]);}},_getContainerValidity:function(){var c=parseInt(this.oModel.getProperty("/ContainerValidity"),10);if(isNaN(c)){c=undefined;}return c;}});}());
},
	"sap/ushell/demo/PersSrvTest/App.view.xml":'<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" controllerName="sap.ushell.demo.PersSrvTest.App" height="100%"><Page title="Manual test page for the personalization service" class="marginBoxContent" showNavButton="false"><content><VBox><Panel headerText="Container life cycle test"><VBox><Toolbar><Input id="inputContainerName" value="{/ContainerName}" type="Text" placeholder="Enter container name"/><Input id="inputContainerValidity" value="{/ContainerValidity}" type="Number" placeholder="Enter validity" width="10em"/><ToolbarSpacer/><Button id="newEmptyContainer" text="New" tooltip="Create a new empty container" press="onNewEmptyContainer"/><Button id="loadContainer" text="Load" tooltip="Load the container" press="onLoadContainer"/><Button id="saveContainer" text="Save" tooltip="Save the container" enabled="{/ContainerLoaded}" press="onSaveContainer"/><Button id="deleteContainer" text="Delete" tooltip="Delete the container" press="onDeleteContainer"/><Button id="largerPayLoad" text="create large Payload" tooltip=" on click verify that \'size\' and \'value\'.length indicated in member \'verify\',  create a large payload according to key \'size\'" press="onLargePayload"/></Toolbar><Table id="itemTable" inset="false" items="{/ContainerItems}"><headerToolbar><Toolbar><Label text="Container Items"/><ToolbarSpacer/><Button icon="sap-icon://add" tooltip="Add item" press="onOpenAddItemDialog" enabled="{/ContainerLoaded}"/><Button icon="sap-icon://delete" tooltip="Remove all items" press="onRemoveAllItems" enabled="{/ContainerLoaded}"/></Toolbar></headerToolbar><columns><Column><Text text="Key"/></Column><Column><Text text="Value"/></Column><Column width="6em" hAlign="Right"><Text text="JSON"/></Column><Column width="6em" hAlign="Center"/></columns><items><ColumnListItem><cells><Text text="{Key}"/><Input value="{Value}"/><CheckBox tooltip="Save as object in JSON format" selected="{JSON}"/><Button icon="sap-icon://delete" tooltip="Remove item" press="onRemoveSingleItem"/></cells></ColumnListItem></items></Table></VBox></Panel></VBox></content></Page></mvc:View>',
	"sap/ushell/demo/PersSrvTest/Component.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
jQuery.sap.declare("sap.ushell.demo.PersSrvTest.Component");jQuery.sap.require("sap.ui.core.UIComponent");sap.ui.core.UIComponent.extend("sap.ushell.demo.PersSrvTest.Component",{oMainView:null,metadata:{manifest:"json"},createContent:function(){"use strict";var c=this.getComponentData&&this.getComponentData();this.oMainView=sap.ui.xmlview("sap.ushell.demo.PersSrvTest.App");return this.oMainView;}});
},
	"sap/ushell/demo/PersSrvTest/i18n/i18n.properties":'#\n#Mon Mar 29 18:19:17 UTC 2021\nsubtitle=Pers container life cycle\ndescription=Sample app for testing the Personalization ushell service\ntitle=Personalization Service Test\n',
	"sap/ushell/demo/PersSrvTest/manifest.json":'{"_version":"1.4.0","sap.app":{"_version":"1.1.0","id":"sap.ushell.demo.PersSrvTest","type":"application","i18n":"i18n/i18n.properties","title":"{{title}}","subTitle":"{{subtitle}}","description":"{{description}}","applicationVersion":{"version":"1.1.0"},"ach":"CA-UI2-INT-FE","crossNavigation":{"inbounds":{"inb":{"semanticObject":"Action","action":"toperssrvtest","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"sap-icon://past"},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","dependencies":{"minUI5Version":"1.28","libs":{"sap.m":{"minVersion":"1.28"}}},"contentDensities":{"compact":false,"cozy":true},"services":{"Personalization":{"factoryName":"sap.ushell.ui5service.Personalization"}}}}'
},"sap/ushell/demo/PersSrvTest/Component-preload"
);
//# sourceMappingURL=Component-preload.js.map