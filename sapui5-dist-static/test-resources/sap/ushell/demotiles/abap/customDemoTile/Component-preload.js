//@ui5-bundle sap/ushell/demotiles/abap/customDemoTile/Component-preload.js
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/demotiles/abap/customDemoTile/Component',["sap/ui/core/UIComponent"],function(U){"use strict";return U.extend("sap.ushell.demotiles.abap.customDemoTile.Component",{metadata:{manifest:"json"},createContent:function(){return sap.ui.view({viewName:"sap.ushell.demotiles.abap.customDemoTile.CustomDemoTile",type:sap.ui.core.mvc.ViewType.XML,viewData:this.getComponentData()});}});});
sap.ui.predefine('sap/ushell/demotiles/abap/customDemoTile/Configuration.controller',["sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(u,L){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a);s.attachChange(function(C){var V=C.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});function c(U){return!U;}t.bindProperty("enabled",{formatter:c,path:"/config/navigation_use_semantic_object"});var i=new L({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new L({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});},true);
sap.ui.predefine('sap/ushell/demotiles/abap/customDemoTile/CustomDemoTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/services/AppType","sap/ushell/utils/WindowUtils","sap/m/library","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/library"],function(C,u,a,A,b,c,W,l,J,L,q,d){"use strict";var G=l.GenericTileScope;var e=l.GenericTileMode;var D=d.DisplayFormat;C.extend("sap.ushell.demotiles.abap.customDemoTile.CustomDemoTile",{_aDoableObject:{},onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,o=a.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,f=this,N=o.navigation_target_url,S,U,h,B=q.sap.getModulePath("assets")+"/custom_tile.png";this.oShellModel=A.getElementsModel();S=t.url.getApplicationSystem();if(S){U=sap.ushell.Container.getService("URLParsing");if(U.isIntentUrl(N)){h=U.parseShellHash(N);if(!h.params){h.params={};}h.params["sap-system"]=S;N="#"+U.constructShellHash(h);}else{N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S;}}this.navigationTargetUrl=N;m=new J({sizeBehavior:b.last("/core/home/sizeBehavior"),wrappingType:b.last("/core/home/wrappingType"),mode:o.display_mode,config:o,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]},backgroundImage:B,title:"Custom Demo Tile",subtitle:"this is just a demo",info:"Demo",icon:"sap-icon://favorite"});s.setModel(m);this._aDoableObject=b.on("/core/home/sizeBehavior").do(function(n){m.setProperty("/sizeBehavior",n);});if(t.types){t.types.attachSetType(function(T){if(f.tileType!==T){if(T==="link"){m.setProperty("/mode",e.LineMode);}else{m.setProperty("/mode",m.getProperty("/config/display_mode"));}f.tileType=T;}});}var g=s.getViewData().chip;g.types.attachSetType(this.setDisplayFormat.bind(this));this.sFrameTypeTile="OneByOne";if(g.configuration&&parseInt(g.configuration.getParameterValueAsString("col"),10)===2){this.sFrameTypeTile="TwoByOne";this.setDisplayFormat(D.Standard);}if(!this.tileType){this.tileType="tile";}if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n){return n&&n!=="";});if(o.display_title_text&&o.display_title_text!==""&&K.indexOf(o.display_title_text)===-1){K.push(o.display_title_text);}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&K.indexOf(o.display_subtitle_text)===-1){K.push(o.display_subtitle_text);}if(o.display_info_text&&o.display_info_text!==""&&K.indexOf(o.display_info_text)===-1){K.push(o.display_info_text);}t.search.setKeywords(K);t.search.attachHighlight(function(H){s.getModel().setProperty("/search/display_highlight_terms",H);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(n){if(n.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(s,t.bag.getBag("tileProperties"));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(n){if(n.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(s,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(o.display_icon_url);t.preview.setPreviewTitle(o.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==="function"){t.preview.setPreviewSubtitle(o.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var n=u.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(f.onCancelConfiguration.bind(null,n));t.configurationUi.attachSave(f.onSaveConfiguration.bind(null,n));return n;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}if(t.actions){var i=o.actions,E;if(i){E=i.slice();}else{E=[];}if(b.last("/core/shell/enablePersonalization")){var T=m.getProperty("/mode")===e.LineMode?"link":"tile",j=a.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this),T);E.push(j);}t.actions.setActionsProvider(function(){return E;});}},onExit:function(){this._aDoableObject.off();},setDisplayFormat:function(s){if(s==="flatwide"){s=D.FlatWide;}var f;switch(s){case D.Flat:f="OneByHalf";break;case D.FlatWide:f="TwoByHalf";break;default:{f=this.sFrameTypeTile;}}this.getView().getModel().setProperty("/frameType",f);},onPress:function(E){var s=this.getView(),v=s.getViewData(),t=v.chip,T=s.getModel().getProperty("/config");if(E.getSource().getScope&&E.getSource().getScope()===G.Display){if(t.configurationUi.isEnabled()){t.configurationUi.display();}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==="#"){hasher.setHash(this.navigationTargetUrl);}else{var f=b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging");if(f){var r={title:T.display_title_text,appType:c.URL,url:T.navigation_target_url,appId:T.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(this.navigationTargetUrl,"_blank");}}}},onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,o=this.getView().getModel().getProperty("/config");o.display_title_text=v.getProperty("/title")||"";o.display_subtitle_text=v.getProperty("/subtitle")||"";o.display_info_text=v.getProperty("/info")||"";o.display_search_keywords=v.getProperty("/keywords")||"";var f=t.bag.getBag("tileProperties");f.setText("display_title_text",o.display_title_text);f.setText("display_subtitle_text",o.display_subtitle_text);f.setText("display_info_text",o.display_info_text);f.setText("display_search_keywords",o.display_search_keywords);function g(E){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");}f.save(function(){L.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config/display_title_text",o.display_title_text);this.getView().getModel().setProperty("/config/display_subtitle_text",o.display_subtitle_text);this.getView().getModel().setProperty("/config/display_info_text",o.display_info_text);this.getView().getModel().setProperty("/config/display_search_keywords",o.display_search_keywords);this.getView().getModel().refresh();}.bind(this),g);},onSaveConfiguration:function(o){var f=new q.Deferred();var m=o.getModel();var t=m.getProperty("/tileModel");var T=o.getViewData().chip;var g=u.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows"));var h={display_icon_url:m.getProperty("/config/display_icon_url"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:q.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:q.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:q.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(o);if(!r){r=u.checkTileActions(o);}if(r){f.reject("mandatory_fields_missing");return f.promise();}if(h.navigation_use_semantic_object){h.navigation_target_url=a.getSemanticNavigationUrl(h);m.setProperty("/config/navigation_target_url",h.navigation_target_url);}var i=T.bag.getBag("tileProperties");i.setText("display_title_text",m.getProperty("/config/display_title_text"));i.setText("display_subtitle_text",m.getProperty("/config/display_subtitle_text"));i.setText("display_info_text",m.getProperty("/config/display_info_text"));i.setText("display_search_keywords",h.display_search_keywords);var j=T.bag.getBag("tileNavigationActions");u.populateTileNavigationActionsBag(j,g);function k(E,n){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");f.reject(E,n);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(h)},function(){var n=a.getConfiguration(T,false,false),p=a.getConfiguration(T,true,false),m=new J({config:n,nav:{navigation_target_url:""},tileModel:t});o.setModel(m);t.setData({config:p,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(n.navigation_target_url);T.preview.setPreviewIcon(n.display_icon_url);T.preview.setPreviewTitle(n.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(n.display_subtitle_text);}}i.save(function(){L.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(n.display_title_text,function(){f.resolve();},k);}else{f.resolve();}},k);j.save(function(){L.debug("property bag 'navigationProperties' saved successfully");},k);},k);return f.promise();},onCancelConfiguration:function(o){var v=o.getViewData(),m=o.getModel(),t=m.getProperty("/tileModel"),T=v.chip,f=a.getConfiguration(T,T.configurationUi.isEnabled(),false);o.getModel().setData({config:f,nav:{navigation_target_url:""},tileModel:t},false);},formatters:{leanURL:W.getLeanURL}});},false);
sap.ui.require.preload({
	"sap/ushell/demotiles/abap/customDemoTile/Configuration.view.xml":'<core:View xmlns="sap.m" xmlns:commons="sap.ui.commons" xmlns:commonsLayout="sap.ui.commons.layout" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" controllerName="sap.ushell.demotiles.abap.customTileDynamic.Configuration"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false"/><form:SimpleForm id="configuration" maxContainerCols="8" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" enabled="{/config/editable}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_number_unit}"/><Input id="number_unitInput" value="{/config/display_number_unit}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_number_unit.tooltip}"/><core:Title id="categoryDynamicData" text="{i18n&gt;configuration.category.dynamic_data}"/><Label text="{i18n&gt;configuration.service_url}"/><Input id="serviceUrlInput" value="{/config/service_url}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.service_url.tooltip}"/><Label text="{i18n&gt;configuration.service_refresh_interval}"/><Input id="refreshInput" value="{/config/service_refresh_interval}" type="Number" enabled="{/config/editable}" placeholder="{i18n&gt;configuration.seconds}" tooltip="{i18n&gt;configuration.seconds.tooltip}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" select="onCheckBoxChange" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" maxLength="50" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><commons:TextField value="{menu_title}" enabled="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><commons:ComboBox id="targetTypeCB" value="{target_type}" enabled="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" enabled="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><commons:TextField value="{action}" enabled="{isTargetTypeIntent}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" enabled="{/config/editable}" valueState="{iconValueState}" valueStateText="{iconValueStateText}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><commonsLayout:MatrixLayout><commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutCell hAlign="End"><commons:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><commons:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></commonsLayout:MatrixLayoutCell></commonsLayout:MatrixLayoutRow></commonsLayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" class="sapContrastPlus" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/demotiles/abap/customDemoTile/CustomDemoTile.view.xml":'<core:View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.demotiles.abap.customDemoTile.CustomDemoTile"><GenericTile header="{/config/display_title_text}" subheader="{/config/display_subtitle_text}" frameType="{/frameType}" backgroundImage="{/backgroundImage}"><TileContent footer="{/info}"><ImageContent src="{/icon}"/></TileContent></GenericTile></core:View>',
	"sap/ushell/demotiles/abap/customDemoTile/manifest.json":'{"_version":"1.1.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["tile","link","flat","flatWide"],"default":"tile"}}},"sap.app":{"id":"sap.ushell.demotiles.abap.customDemoTile","_version":"1.0.0","type":"application","applicationVersion":{"version":"1.0.0"},"title":"Custom Demo App Launcher","description":"Custom Demo Tile","ach":"CA-FLP-FE-UI"},"sap.ui":{"_version":"1.1.0","icons":{"icon":"sap-icon://favorite"},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.demotiles.abap.customDemoTile","dependencies":{"minUI5Version":"1.88","libs":{"sap.m":{}}},"models":{},"rootView":{"viewName":"sap.ushell.demotiles.abap.customDemoTile.CustomDemoTile","type":"XML"},"handleValidation":false}}'
},"sap/ushell/demotiles/abap/customDemoTile/Component-preload"
);
//# sourceMappingURL=Component-preload.js.map