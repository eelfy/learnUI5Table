<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio78880c09a1954a02b49c21357d45c91f" class=" section topic"><h1 class="collapsible-icon sap-icon innerTitle">Performance Measurement Using sap/ui/performance/Measurement Module</h1><div class="fig"><h1 class="topictitle1 title">Performance Measurement Using sap/ui/performance/Measurement Module</h1><div class="shortdesc">You can use sap/ui/performance/Measurement to measure the
		performance of your JavaScript code. </div><p>For each measurement, the result is a time and a duration. The time are the milliseconds
			(ms) from starting the measurement till its end. The duration is the effective
			milliseconds, pause phases are not counted here. </p><p>You can measure the categories that are used by the SAPUI5 core classes as
			listed in the following table:</p><div class="tableWrapper "><div class="fig"><tgroup>
					
					
					</tgroup><table border="1" id="table_vtv_mb4_w5" class=" "><colgroup><col width="1"><col width="4.61"></colgroup><thead>
						<tr>
							<th colspan="1" rowspan="1">
								<p>Category</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Description</p>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>javascript</code> (default)</p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Default measurement category if no category is provided</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>require</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Identifies the duration of <code>sap.ui.require</code> for lazy loading of JavaScipt classes including the loading and parsing times
									for a class</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>xmlhttprequest</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Identifies the duration of an <code>jQuery.ajax</code>
									call</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>render</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Used for all rendering-related measurements that trigger core
									rendering of controls within the <code>RenderManager</code>
									class</p>
								<p>With the <code>render</code> category there comes an
									additional set of categories to distinguish between different
									phases of rendering</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>control</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Identifies the duration for HTML rendering provided with the
										<code>ControlRender.render</code> method</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>after</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Identifies the duration for calls on the control's
										<code>onAfterRendering</code> method</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top">
								<p><code>preserve</code></p>
							</td>
							<td colspan="1" rowspan="1" valign="top">
								<p>Identifies the duration needed to find out whether rendering can
									be preserved</p>
							</td>
						</tr>
					</tbody>
				</table></div></div><p></p><section><h2 class="title ">Procedure</h2><section>
				<h3 class="title ">1. Activate performance measurement</h3>
				<p>By default, <code>Measurement</code> is disabled to avoid unnecessary code
					execution during runtime. Therefore, you first have to activate the measurement
					using one of the following options:</p><ul class="ul ">
						<li class="li">
							<p>Use URL Parameter <code>sap-ui-measure=true</code> to measure an
								initial request.</p>
						</li>
						<li class="li">
							<p>Use the diagnostics window in your app with <span class="keys">
									<span class="keyWrap"><kbd class="key">Ctrl</kbd></span>
									<span class="keyWrap"><kbd class="key">Alt</kbd></span>
									<span class="keyWrap"><kbd class="key">Shift</kbd></span>
									<span class="keyWrap"><kbd class="key">S</kbd></span>
								</span>. In this window, you can also see a visualization of the
								results.</p>
						</li>
						<li class="li">
							<p>Activate measurement in the browser's console by calling
									<code>Measurement.setActive(true)</code></p>
						</li>
						<li class="li">
							<p>Create a measurement in your code with:
								</p><section class="lang-js"><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Log" required from module "sap/base/Log"
// "Measurement" required from module "sap/ui/performance/Measurement"
Measurement.setActive(true);
Measurement.start("myId","Measurement of myId");
Log.info("foo");
Measurement.end("myId");</pre></div></section><p></p>
							<p>You can use methods as listed in the following table:</p><div class="tableWrapper "><div class="fig"><tgroup>
										
										
										</tgroup><table border="1" id="table_zc2_grh_w5" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
											<tr>
												<th colspan="1" rowspan="1">
												<p>Action</p>
												</th>
												<th colspan="1" rowspan="1">
												<p>Method</p>
												</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td colspan="1" rowspan="1" valign="top">
												<p>Start measurement</p>
												</td>
												<td colspan="1" rowspan="1" valign="top">
												<p><code>Measurement.start(sId,sInfo,[categories])</code></p>
												</td>
											</tr>
											<tr>
												<td colspan="1" rowspan="1" valign="top">
												<p>End measurement</p>
												</td>
												<td colspan="1" rowspan="1" valign="top">
												<p><code>Measurement.end(sId)</code></p>
												</td>
											</tr>
											<tr>
												<td colspan="1" rowspan="1" valign="top">
												<p>Pause</p>
												</td>
												<td colspan="1" rowspan="1" valign="top">
												<p><code>Measurement.pause(sId)</code></p>
												</td>
											</tr>
											<tr>
												<td colspan="1" rowspan="1" valign="top">
												<p>Resume</p>
												</td>
												<td colspan="1" rowspan="1" valign="top">
												<p><code>Measurement.resume(sId)</code></p>
												</td>
											</tr>
										</tbody>
									</table></div></div><p></p>
						</li>
					</ul><p></p>
				<p>To activate measurement for certain categories only, you have the following
						options:</p><ul class="ul ">
						<li class="li">
							<p>Provide a URL Parameter with categories
									<code>sap-ui-measure=category1,category2</code></p>
						</li>
						<li class="li">
							<p>Add the category as parameter to the call of the
									<code>Measurement.setActive</code> as in the following
								example:</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// Measure only "require" category
// "Measurement" required from module "sap/ui/performance/Measurement"
Measurement.setActive(true,<span class="emphasis">"require"</span>)</pre></div></section><p></p>
							<p>To assign a measurement to a specific category, just add the category
								to the <code>start</code> function.
								</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Measurement" required from module "sap/ui/performance/Measurement"
Measurement.start("myId","Measurement of myId", **\["foo"\]**);</pre></div></section><p></p>
							<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
								</p><p>If you also use the <code>start</code> or
										<code>average</code> method, make sure that the same
									categories are passed on, otherwise no measurement is started.
								</p>
							<p></p></div></div>
						</li>
					</ul><p></p>
			</section><section>
				<h3 class="title ">2. Retrieve the results</h3>
				<p>You can view the results in the
						<span class="ph uicontrol">Performance</span> section of the diagnostics window (<span class="keys">
						<span class="keyWrap"><kbd class="key">Ctrl</kbd></span>
						<span class="keyWrap"><kbd class="key">Alt</kbd></span>
						<span class="keyWrap"><kbd class="key">Shift</kbd></span>
						<span class="keyWrap"><kbd class="key">S</kbd></span>
					</span>). Here, you can also refresh the result list, if the performance
					measurement is still running.</p>
				<p>You can retrieve the results via API with one of the following commands:</p><div class="tableWrapper "><div class="fig"><tgroup>
							
							
							</tgroup><table border="1" id="table_yqv_rxn_w5" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
								<tr>
									<th colspan="1" rowspan="1">
										<p>Command</p>
									</th>
									<th colspan="1" rowspan="1">
										<p>Returns</p>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.getAllMeasurements()</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of all measures (running and completed)</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.getAllMeasurements(true)</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of completed measures</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.getAllMeasurements(false)</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of running (not completed) measures</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.getMeasurement(string) </code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>One specific measurement by ID</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.filterMeasurements(func)</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of all measures based on the result of the filter
											function (running and completed)</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.filterMeasurements(func,
												true)</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of completed measures based on the result of the
											filter function</p>
									</td>
								</tr>
								<tr>
									<td colspan="1" rowspan="1" valign="top">
										<p><code>Measurement.filterMeasurements(func,
												false)</code></p>
									</td>
									<td colspan="1" rowspan="1" valign="top">
										<p>Array of running measures based on the result of the
											filter function</p>
									</td>
								</tr>
							</tbody>
						</table></div></div><p></p>
				<p>In Google Chrome, for example, you can also display the results in a table in the
					console by using:
					</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">console.table(Measurement.getAllMeasurements(true)) //table with completed measurements</pre></div></section><p></p>
			</section><section>
				<h3 class="title ">3. Interpret the results</h3>
				<p>Each entry in the resulting array provides an object of the following
						structure:</p><ul class="ul ">
						<li class="li">
							<p><code>id</code>: <code>string</code></p>
							<p>The unique ID of the measurement as provided in the
									<code>start</code> or <code>average</code> method</p>
						</li>
						<li class="li">
							<p><code>info</code>: <code>string</code></p>
							<p>Additional information as provided in the <code>start</code> or
									<code>average</code> method</p>
						</li>
						<li class="li">
							<p><code>duration</code>: <code>float</code></p>
							<p>Duration or average duration in ms </p>
						</li>
						<li class="li">
							<p><code>count</code>: <code>int</code></p>
							<p>Number of calls counted of an average</p>
						</li>
						<li class="li">
							<p><code>average</code>: <code>boolean</code></p>
							<p>Indicates whether the result is an average</p>
						</li>
						<li class="li">
							<p><code>categories</code>: <code>string[]</code></p>
							<p>Categories as provided in the <code>start</code> or
									<code>average</code> method </p>
						</li>
					</ul><p></p>
			</section><section>
				<h3 class="title ">4. Clear results</h3>
				<p>To clear all measurements call the <code>Measurement.clear</code> method.</p>
			</section></section><section><h2 class="title ">Specific Use Cases</h2><section>
				<h3 class="title ">Averages</h3>
				<p>For repeatedly occurring operations, you can calculate an average duration with
					the <code>Measurement.average</code> method.
					</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Log" required from module "sap/base/Log"
// "Measurement" required from module "sap/ui/performance/Measurement"
Measurement.setActive(true);
for (var i=0;i&lt;1000;i++) {
    Measurement.average("myId","Average of myId");
    Log.info("Foo " + i);
    Measurement.end("myId");
}</pre></div></section>Based
					on the ID, all measurement calls are counted and the average duration is
					calculated and provided in the result, together with the complete duration and
					the number of
					calls:<section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Log" required from module "sap/base/Log"
// "Measurement" required from module "sap/ui/performance/Measurement"
Log.info("1000 calls: " + Measurement.getMeasurement("myId").count === 1000); //true
Log.info("Average time: " + Measurement.getMeasurement("myId").duration);
</pre></div></section><p></p>
			</section><section>
				<h3 class="title ">Measurement of Object Methods</h3>
				<p>You can register an average measurement without changing the original source
					code. For this, you use the following APIs:</p><ul class="ul ">
						<li class="li">
							<p><code>Measurement.registerMethod</code></p>
						</li>
						<li class="li">
							<p><code>Measurement.unregisterMethod</code></p>
						</li>
						<li class="li">
							<p><code>Measurement.unregisterAllMethods</code></p>
						</li>
					</ul><p></p>
				<p>To measure the average time a method of an instance, you can use the following
					example
					code:</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Button" required from module "sap/m/Button"
// "Measurement" required from module "sap/ui/performance/Measurement"
var oButton = new Button();
Measurement.registerMethod("oButton.setText", oButton, "setText", ["instance"]); //register to oButton instance on method setText
Measurement.setActive(true,["instance"]); //measure only category "instance"
for (var i=0;i&lt;1000;i++) {
    oButton.setText("MyButton" + i);
}
 
Measurement.unregisterMethod(oButton, "setText");
// or Measurement.unregisterAllMethods();

Measurement.getAllMeasurements();</pre></div></section><p></p>
				<p>To measure the average time a method of a class, you can use the following
					example
					code:</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// "Button" required from module "sap/m/Button"
// "Measurement" required from module "sap/ui/performance/Measurement"
Measurement.registerMethod("oButton.setText", Button.prototype, "setText",["class"]); //register to Button class on method setText
Measurement.setActive(true,["class"]); //measure only category "class"
for (var i=0;i&lt;1000;i++) {
    var oButton = new Button();
    oButton.setText("MyButton" + i);
}
 
Measurement.unregisterMethod(oButton, "setText");
//or Measurement.unregisterAllMethods();
 
Measurement.getAllMeasurements();</pre></div></section><p></p>
			</section><section>
				<h3 class="title ">Filtering</h3>
				<p>You can also use the categories listed above as filters for the result list or to
					define measurements for one or more specific categories with the
						<code>filterMeasurements</code> method. </p>
				<p>To filter the categories that are measured, you use, for
					example:</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// Filter for category1
Measurement.filterMeasurements(function(oMeasurement) {
    return oMeasurement.categories.indexOf("category1") &gt; -1;
});</pre></div></section><p></p>
				<p>To filter the results, you can use a code like
					this:</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">// Filter for duration &gt; 500ms
Measurement.filterMeasurements(function(oMeasurement) {
    return oMeasurement.duration &gt; 500;
});
</pre></div></section><p></p>
			</section></section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="#/api/jQuery.sap.measure" title="#/api/jQuery.sap.measure" class="sap-doc" alt="#/api/jQuery.sap.measure">API Reference: jQuery.sap.measure.html</a></li>
		<li><a href="#/topic/408b40efed3c416681e1bd8cdd8910d4.html" title="If a web app has performance issues, finding the cause can be both a time-consuming and nerve-consuming task. To help you avoid and solve performance issues in your app, here are some good practices we've discovered while dealing with SAPUI5 apps." class="sap-doc">Performance: Speed Up Your App</a></li>
		<li><a href="#/topic/966d67c8cc5046419d1b35556cd9e447.html" title="This section lists some of the most important issues that should be avoided to improve performance in SAPUI5 applications." class="sap-doc">Performance Issues</a></li>
	</ul></section></div></section></div></body></html>