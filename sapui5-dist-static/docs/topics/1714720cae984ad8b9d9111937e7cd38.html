<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio1714720cae984ad8b9d9111937e7cd38" class=" section topic"><h1 class="collapsible-icon sap-icon innerTitle">Visual Filter Setup</h1><div class="fig"><h1 class="topictitle1 title">Visual Filter Setup</h1><div class="shortdesc">An intuitive way of choosing filter values from an associated measure value.This setup supports line, bar, and donut charts.</div><section><p><code>SelectionFields</code> annotation for which a visual filter is
					defined.</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>The ALP ignores the <code>UI.Hidden</code> fields when you
					select filters if the IN mapping points to a field marked with
						<code>UI.Hidden</code>
					in the valuelist entity set. For example, the
						<code>Status_ID</code> from the main entity set points to
						<code>StatusCode</code> in the value help entity set (of the visual
					filter). If the <code>StatusCode</code> is marked as
						<code>UI.Hidden</code>, then the incoming value is
				ignored.</p></div></div><p></p><p>Configuring the <code>sap:value-list=fixed-values</code>
				property in the <code>annotation.xml</code> file lets you display visual
				filter values in a dropdown list. This allows users to select or deselect values
				that are not displayed in the chart. If the dropdown list is enabled, ensure that
				the records available in the collection path entity set of the visual filter and
				compact filter are the same for a smooth sync between the visual filter and the
				compact filter.</p><p>The visual filter includes only the first measure and
				dimension from the first chart annotation within the specified
					<code>PresentationVariantQualifier</code>. Make sure that the dimension you
				specify in the chart and the <code>ValueListProperty</code> of the
					<code>OUT</code> parameter is the same. You can also define a
					<code>SortOrder</code> property in the <code>PresentationVariant</code>
				annotation to control the sort order based on a sort field.</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><p>Sorting in visual filters is based on this logic: </p><ul class="ul ">
							<li class="li">For bar and donut chart types, sorting is always based on the
								measure displayed (the default is descending order). To change the
								sort order property, define the <code>SortOrder</code> property
								in the <code>PresentationVariant</code> annotation.</li>
							<li class="li">For line charts with time-based dimensions, sorting is always based
								on the dimension displayed in ascending order, however, only the
								last six time periods are
									displayed.<p>The
									sorting by the annotation is ignored for
									time-based dimensions for line-charts in the visual
								filter.</p></li>
							<li class="li">For line charts with non time-based dimensions, sorting is always
								based on the dimension (the default is ascending order). To change
								the sort order, define the <code>SortOrder</code> property in
								the <code>PresentationVariant</code> annotation.</li>
						</ul><p></p>
				<p></p></div></div><p></p><div class="imagemap_sidebyside dark-overlays" data-static-type="false">
				
				
				<p>This image is interactive. Hover over each area for a description. Click highlighted areas
							for more information
						</p><div class="imagemap fig"><img src="loio77f4724abbaa4f38a7df73150248e2a8_LowRes.png" usemap="#__im_imagemap1"><map name="__im_imagemap1"><area shape="rect" coords="234,89,431,129" originalcoords="234,89,431,129" alt="1714720cae984ad8b9d9111937e7cd38.xml#loio1714720cae984ad8b9d9111937e7cd38/subsection-im1" title="Value List" href="#/topic/1714720cae984ad8b9d9111937e7cd38.html" class="sap-doc"><area shape="rect" coords="347,175,542,213" originalcoords="347,175,542,213" alt="1714720cae984ad8b9d9111937e7cd38.xml#loio1714720cae984ad8b9d9111937e7cd38/subsection-im2" title="Presentation Variant" href="#/topic/1714720cae984ad8b9d9111937e7cd38.html" class="sap-doc"><area shape="rect" coords="346,254,541,294" originalcoords="346,254,541,294" alt="1714720cae984ad8b9d9111937e7cd38.xml#loio1714720cae984ad8b9d9111937e7cd38/subsection-im3" title="Chart Annotation" href="#/topic/1714720cae984ad8b9d9111937e7cd38.html" class="sap-doc"><area shape="rect" coords="0,90,195,129" originalcoords="0,90,195,129" alt="1714720cae984ad8b9d9111937e7cd38.xml#loio1714720cae984ad8b9d9111937e7cd38/subsection-im4" title="Selection Fields" href="#/topic/1714720cae984ad8b9d9111937e7cd38.html" class="sap-doc"><area shape="rect" coords="128,175,324,214" originalcoords="128,175,324,214" alt="1714720cae984ad8b9d9111937e7cd38.xml#loio1714720cae984ad8b9d9111937e7cd38/subsection-im5" title="SelectionVariant Annotation" href="#/topic/1714720cae984ad8b9d9111937e7cd38.html" class="sap-doc"></map></div>
				<section id="subsection-im0" class="visibility-trigger">
					<h3 class="title visibility-trigger">
					<p>Hover over each action for a description. Click the action for more
						information.</p>
				</h3></section>
				<section id="subsection-im1" class="visibility-trigger">
					<h3 class="title visibility-trigger">ValueList Annotation</h3>
					<p>This is an example of a code snippet for a value list annotation. You use it
						to configure visual filters. For more information, see <cite>Defining
							ValueList Annotations</cite>.</p>
					<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p><code>ValueList</code> Annotation
						Sample</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult/SalesOrderOverallStatus"&gt;
   &lt;Annotation Term="Common.ValueList" Qualifier="VisualFilter"&gt;
      &lt;Record&gt;
         &lt;PropertyValue Property="Label" String="Overall Status" /&gt;
         &lt;PropertyValue Property="CollectionPath" String="SEPMRA_C_ALP_SlsOrdItemCubeALPResults" /&gt;
         &lt;PropertyValue Property="SearchSupported" Bool="false" /&gt;
         &lt;PropertyValue Property="PresentationVariantQualifier" String="FilterNumberOfSalesOrdersByStatus" /&gt;
         &lt;PropertyValue Property="SelectionVariantQualifier" String="SVForStatus" /&gt;
         &lt;PropertyValue Property="Parameters"&gt;
            &lt;Collection&gt;
               &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="SalesOrderOverallStatus" /&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="SalesOrderOverallStatus" /&gt;
               &lt;/Record&gt;
               &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="MainProductCategory" /&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="MainProductCategory" /&gt;
               &lt;/Record&gt;
               &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="ProductCategory" /&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="ProductCategory" /&gt;
               &lt;/Record&gt;
            &lt;/Collection&gt;
         &lt;/PropertyValue&gt;
      &lt;/Record&gt;
   &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div></section><p></p></div></div>
					<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>See the <span class="emphasis">Defining ValueList Annotations</span> section for
						information about the IN/OUT mapping of visual filters.</p></div></div>
				</section>
				<section id="subsection-im2" class="visibility-trigger">
					<h3 class="title visibility-trigger">PresentationVariantQualifier</h3>
					<p>The <code>PresentationVariant</code> qualifier provides chart definitions
						for visual filters. The visual filter picks up the first chart annotation in
						the <code>PresentationVariant</code> annotation to render the chart. If
						the chart type is not supported, the ALP renders a bar chart (default chart
						type).</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotation Term="UI.PresentationVariant" Qualifier="FilterNumberOfSalesOrdersByStatus"&gt;
   &lt;Record&gt;
      &lt;PropertyValue Property="Text" String="Filter: Number of Sales Order by Status" /&gt;
      &lt;PropertyValue Property="SortOrder"&gt;
         &lt;Collection&gt;
            &lt;Record Type="Common.SortOrderType"&gt;
               &lt;PropertyValue Property="Property" PropertyPath="NumberOfSalesOrders" /&gt;
               &lt;PropertyValue Property="Descending" Bool="true" /&gt;
            &lt;/Record&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="Visualizations"&gt;
         &lt;Collection&gt;
            &lt;AnnotationPath&gt;@UI.Chart#FilterNumberOfSalesOrdersByStatus&lt;/AnnotationPath&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
   &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div></section><p></p>
				</section>
				<section id="subsection-im3" class="visibility-trigger">
					<h3 class="title visibility-trigger">Chart Annotation</h3>
					<section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotation Term="UI.Chart" Qualifier="FilterNumberOfSalesOrdersByStatus"&gt;
   &lt;Record Type="UI.ChartDefinitionType"&gt;
      &lt;PropertyValue Property="Title" String="Sales Orders by Status" /&gt;
      &lt;PropertyValue Property="Description" String="Number of Sales Orders by Status" /&gt;
      &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Donut" /&gt;
      &lt;PropertyValue Property="Dimensions"&gt;
         &lt;Collection&gt;
            &lt;PropertyPath&gt;SalesOrderOverallStatus&lt;/PropertyPath&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="DimensionAttributes"&gt;
         &lt;Collection&gt;
            &lt;Record Type="UI.ChartDimensionAttributeType"&gt;
               &lt;PropertyValue Property="Dimension" PropertyPath="SalesOrderOverallStatus" /&gt;
               &lt;PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" /&gt;
            &lt;/Record&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="Measures"&gt;
         &lt;Collection&gt;
            &lt;PropertyPath&gt;NumberOfSalesOrders&lt;/PropertyPath&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="MeasureAttributes"&gt;
         &lt;Collection&gt;
            &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
               &lt;PropertyValue Property="Measure" PropertyPath="NumberOfSalesOrders" /&gt;
               &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
               &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#NumberOfSalesOrders" /&gt;
            &lt;/Record&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
   &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div></section>
					<p><span class="emphasis">Chart Type</span></p>
					<p>You can select chart data points and
						segments
						in a chart. These selections influence the other chart
						filters depending on the configuration of the value list annotation.</p><div class="tableWrapper "><div class="fig"><tgroup>
								
								
								</tgroup><table border="1" id="table_ufw_dxg_3z" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
									<tr>
										<th colspan="1" rowspan="1">
											<p>The Chart Type…</p>
										</th>
										<th colspan="1" rowspan="1">
											<p>Displays…</p>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td colspan="1" rowspan="1" valign="top">
											<p>Bar</p>
										</td>
										<td colspan="1" rowspan="1" valign="top">
											<p>Top or bottom three records</p>
										</td>
									</tr>
									<tr>
										<td colspan="1" rowspan="1" valign="top">
											<p>Line</p>
										</td>
										<td colspan="1" rowspan="1" valign="top">
											<p>First or last six data points</p>
										</td>
									</tr>
									<tr>
										<td colspan="1" rowspan="1" valign="top">
											<p>Donut</p>
										</td>
										<td colspan="1" rowspan="1" valign="top">
											<p>Top or bottom two records</p>
										</td>
									</tr>
								</tbody>
							</table></div></div><p></p>
					<p>You can enable the visual filter (donut chart type) to display an overlay
						message if there are measures with negative values. Set the
							<code>Analytics.AccumulativeMeasure</code> annotation to
							<code>false</code> as shown in the example. By default, the value of
						the <code> Analytics.AccumulativeMeasure</code> annotation is
							<code>true</code>.</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotations Target="SEPMRA_ALP_SO_ANA_SRV.Z_SEPMRA_C_ALP_QUARTERVHType/DifferenceAmount"&gt;
    &lt;Annotation Term="Analytics.Measure" Bool="true" /&gt;
    &lt;Annotation Term="Analytics.AccumulativeMeasure" Bool="false" /&gt;
&lt;/Annotations&gt;
</pre></div></section><p></p>
					<p><span class="emphasis">Chart Title</span></p>
					<p>ALP displays chart titles in the following order: &lt;Measure Name&gt; by
						&lt;Dimension Name&gt; in &lt;Scale factor&gt; &lt;UoM&gt;</p>
					<ul class="ul ">
						<li class="li">&lt;Measure Name&gt; indicates the measure associated with the chart.
							Use <code>sap:label()</code>
						</li>
						<li class="li">&lt;Dimension Name&gt; indicates the dimension associated with the
							chart. Use <code>sap:label()</code></li>
						<li class="li">&lt;Scale Factor&gt; indicates the scale as specified using the
								<code>ScaleFactor</code> property of the
								<code>DataPoint</code> annotation associated with the measure
							displayed in the chart.</li>
					</ul>
					<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>The scale factor in the chart and chart title are of the same
						scale.</p></div></div>
				</section>
				<section id="subsection-im4" class="visibility-trigger">
					<h3 class="title visibility-trigger">Annotation: SelectionFields</h3>
					<p>Define the <code>SelectionFields</code> annotation for sorting the order
						of the fields displayed in the visual filters. If there are any mandatory
						filter fields that are not specified in the
						<code>SelectionFields</code>, then these fields appear first, followed
						by the other entries in the <code>SelectionFields</code>.</p>
					<section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotation Term="UI.SelectionFields"&gt;
  &lt;Collection&gt;
    &lt;PropertyPath&gt;DeliveryCalendarYear&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;SoldToParty&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;Product&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;MainProductCategory&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;DeliveryCalendarQuarter&lt;/PropertyPath&gt;
  &lt;/Collection&gt;
&lt;/Annotation&gt;</pre></div></section>
				</section>
				<section id="subsection-im5" class="visibility-trigger">
					<h3 class="title visibility-trigger">Annotation: SelectionVariant</h3>
					<section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotation Term="UI.SelectionVariant" Qualifier="SVForStatus"&gt;
   &lt;Record&gt;
      &lt;PropertyValue Property="Parameters"&gt;
         &lt;Collection&gt;
            &lt;Record Type="UI.Parameter"&gt;
               &lt;PropertyValue Property="PropertyName" PropertyPath="CompanyCurrency" /&gt;
               &lt;PropertyValue Property="PropertyValue" String="EUR" /&gt;
            &lt;/Record&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="SelectOptions"&gt;
         &lt;Collection&gt;
            &lt;Record Type="UI.SelectOptionType"&gt;
               &lt;PropertyValue Property="PropertyName" PropertyPath="SalesOrderOverallStatus" /&gt;
               &lt;PropertyValue Property="Ranges"&gt;
                  &lt;Collection&gt;
                     &lt;Record Type="UI.SelectionRangeType"&gt;
                        &lt;PropertyValue EnumMember="UI.SelectionRangeSignType/E" Property="Sign" /&gt;
                        &lt;PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option" /&gt;
                        &lt;PropertyValue Property="Low" String="D" /&gt;
                     &lt;/Record&gt;
                  &lt;/Collection&gt;
               &lt;/PropertyValue&gt;
            &lt;/Record&gt;
            &lt;Record Type="UI.SelectOptionType"&gt;
               &lt;PropertyValue Property="PropertyName" PropertyPath="Product" /&gt;
               &lt;PropertyValue Property="Ranges"&gt;
                  &lt;Collection&gt;
                     &lt;Record Type="UI.SelectionRangeType"&gt;
                        &lt;PropertyValue EnumMember="UI.SelectionRangeSignType/E" Property="Sign" /&gt;
                        &lt;PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option" /&gt;
                        &lt;PropertyValue Property="Low" String="HT-1502" /&gt;
                     &lt;/Record&gt;
                  &lt;/Collection&gt;
               &lt;/PropertyValue&gt;
            &lt;/Record&gt;
         &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
   &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div></section>
				</section>
			</div><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>You can also define visual filters for parameters.</p>
			<p></p></div></div></section><section id="section_aps_ntv_yfb">
			<h2 class="title ">Text Arrangement</h2>
			<p>You can now change the formatting of the text that appears on the visual filter chart
				axis labels, legends, chart
				tooltips,
				and within the selected link (if a chart context is selected). The default view of
				the visual filter bar is based on the filter fields defined in the
					<code>TextArrangement</code> annotation and its type in the main entity set
				to change the text behavior like this: </p><div class="tableWrapper "><div class="fig"><tgroup>
						
						
						</tgroup><table border="1" id="table_zyg_kb4_wbb" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
							<tr>
								<th colspan="1" rowspan="1">
									<p>Text Arrangement Type</p>
								</th>
								<th colspan="1" rowspan="1">
									<p>Description</p>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>TextFirst</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>Use the visual filter to combine measures or item counts with
										filter values. The ChartDefault type that has the sap:text
										first, followed by the ID in brackets, for example,
										"Notebook (001)"</p>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>TextLast</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>ID followed by the sap:text in brackets, for example, "001
										(Notebook)".</p>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>TextOnly</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>Shows only the sap:text, for example, "Notebook"</p>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>TextSeparate</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>Shows only the ID, for example, "002"</p>
								</td>
							</tr>
						</tbody>
					</table></div></div><div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Text Arrangement
					Annotation</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotations Target="ProductType"&gt; //Main EntitySet
  &lt;Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"/&gt; 
&lt;/Annotations&gt;</pre></div></section><p></p></div></div><p></p>
		</section><section id="section_jyz_xgh_jkb">
			<h2 class="title ">Display of Empty Values</h2>
			<p>The empty dimension value is displayed as <span class="ph uicontrol">Not Assigned</span> in the
				visual filter chart. Note that this impacts the display only of visual filters but
				not of the value help, drop down, or compact filters. For the value help, drop down,
				or compact filter, it is displayed as <span class="ph uicontrol">&lt;empty&gt;</span>.</p>
			<div><div class="fig"><img src="loio841d97da3917418e988f776ed08cd20e_HiRes.png" usemap="#"></div></div>
		</section><section id="section_ms2_qdl_j2b">
			<h2 class="title ">Lazy Loading of Visual Filters</h2>
			<p>You enable lazy loading of visual filters by configuring the
					<code>lazyLoadVisualFilter</code> setting in the descriptor file. It is
				disabled by default.</p>
			<p>If you enable lazy loading, then the batch call for loading of visual filters is
				deferred until the user switches to the visual filter bar.</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Descriptor
				setting</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">"settings": {
              "qualifier": "MainContent",
              "defaultContentView": "charttable",
              "smartVariantManagement": true,
              "showGoButtonOnFilterBar": true,
              "multiSelect": true,
              <code>"lazyLoadVisualFilter":true,
</code>
              "tableType": "AnalyticalTable",
              ....
}
</pre></div></section><p></p></div></div>
		</section><section id="section_mlt_fxn_j2b">
			<h2 class="title ">Fixed Values on Visual Filters</h2>
			<p>To display default records on the visual filter chart, configure the SelectionVariant
				annotation with filter values (<code>SelectOptions</code> property) and link it
				with the <code>ValueList</code> annotation.</p>
			<p>The in/out parameter values take precedence over the
					<code>SelectionVariant</code> value set, if the property is an in/out
				parameter and has a select option value without a chart dimension.</p><div class="tableWrapper "><div class="fig"><tgroup>
						
						
						</tgroup><table border="1" id="table_pkx_kxn_j2b" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
							<tr>
								<th colspan="1" rowspan="1">
									<p>Scenario</p>
								</th>
								<th colspan="1" rowspan="1">
									<p>Description</p>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p><span class="emphasis">Scenario 1</span>: Annotation configuration</p>
									<p>Chart dimension = “Status”, Select Option in SV = [(“Status”,
										Values = “In Progress”, “New”), (“Project”, Values=”List
										Report”)]</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>
										</p><ul class="ul ">
											<li class="li">
												<p>"Project" is not a chart dimension, it is an
												in/out parameter for the status</p>
											</li>
											<li class="li">
												<p>The chart displays records
												relating to
												<code>In Progress</code> and
												<code>New</code> status values for the project
												<code>List Report</code>.</p>
											</li>
										</ul>
									<p></p>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p><span class="emphasis">Scenario 2</span>: Overriding annotation
										configuration from filter bar</p>
									<p>Change the project value from <code>List Report</code> to
											<code>Analytical List Page</code> on the filter
										bar</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>Specifying <kbd class="ph userinput">Analytical List Page</kbd> as a
										value for the project in the filter bar, re-renders charts
										to display records for <span class="ph uicontrol">In Progress</span>
										and <span class="ph uicontrol">New</span> status values of the
										Analytical List Page project.</p>
									<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
										</p><p>The in/out parameter mapping values set for the other
											properties in the <code>SelectionVariant</code>
											annotation
											that
											are not part of the project field is considered as it
											is.</p>
									<p></p></div></div>
								</td>
							</tr>
						</tbody>
					</table></div></div><p></p>
			<p>To render the visual filter with a parametrized entity set as the collection path,
				you need to provide parameters in the <code>SelectionVariant</code> annotation.
				Any values added in the smart filter bar take priority over the
					<code>SelectionVariant</code> annotation values.</p><div class="tableWrapper "><div class="fig"><tgroup>
						
						
						</tgroup><table border="1" id="table_jng_vyn_j2b" class=" "><colgroup><col width="1.0"><col width="1.0"></colgroup><thead>
							<tr>
								<th colspan="1" rowspan="1">
									<p>Scenario</p>
								</th>
								<th colspan="1" rowspan="1">
									<p>Description</p>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>Scenario 1: Annotation configuration</p>
									<p>Parameter in SelectionVariant = [(“P_DisplayCurrency”,
										Value=”USD”)]</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>The chart renders records with the currency unit USD.</p>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1" valign="top">
									<p>Scenario 2: Overriding annotation configurations on the
										filter bar</p>
									<p>Change USD to EUR on the filter bar</p>
								</td>
								<td colspan="1" rowspan="1" valign="top">
									<p>If you specify EUR as a value for
											<code>P_DisplayCurrency</code> in the filter bar,
										the chart re-renders with records that have the currency
										unit EUR</p>
								</td>
							</tr>
						</tbody>
					</table></div></div><p></p>
		</section><section id="section_gsx_crh_w2b">
			<h2 class="title ">Date Selection</h2>
			<p>Visual filters now support date-based, single selection fields in the Universal Time
				Coordinated (UTC) format. The date selection field appears on the visual filter if
				the annotations in the metadata file contain:</p><ul class="ul ">
					<li class="li">
						<p>Edm.DateTime and sap:display-format="Date"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="yearmonthday"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="yearmonth"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="year"</p>
					</li>
					
					<li class="li">
						<p>Edm.String and sap:semantics="yearquarter"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="yearweek"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="fiscalyear"</p>
					</li>
					<li class="li">
						<p>Edm.String and sap:semantics="fiscalyearperiod"</p>
					</li>
					
				</ul><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>Displaying the value in
					the
					visual filter and its tooltip is impacted. Value help or the
					dropdown for selecting the values remains the
					same
					if sap:semantics="yearmonth" is set.</p></div></div><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><p>You can see the date selection button on the visual filter for fields
						annotated with <code>sap:filter-restriction=”single-value"</code>. For
						fields annotated with <code>sap:filter-restriction=”multiple"</code>,
						you see the value help selection button.</p>
				<p></p></div></div><p></p>
			<p>
				</p><div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Sample
					Metadata</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Property Name="StartDate" Type="Edm.DateTime" sap:display-format="Date" 
sap:aggregation-role="dimension" sap:label="Date" sap:filter-restriction="single-value"/&gt;

&lt;Property Name="StartDate" Type="Edm.String" sap:semantics="yearmonthday" 
sap:aggregation-role="dimension" sap:label="Date" sap:filter-restriction="single-value"/&gt;
</pre></div></section><p></p></div></div>
			<p></p>
		</section><section>
			<h2 class="title "><span class="emphasis">Unit of Measure with Multiple Units of Measure</span></h2>
			<p>Visual filter charts do not show up if the back end returns data with multiple units
				of measure (UoM). To achieve a single UoM, set the required UoM in the filter bar or
				change all the UoMs into one UoM in the back end. </p>
			<p>For currency-based visual filter values, the currency value could come from another
				filter field in the main entity set (mapped to the value help currency field based
				entity set through the standard IN mapping). If this kind of mapping exists with an
				empty filter field in the main entity set,
				ALP
				uses the value set maintained in the <span class="ph uicontrol">DisplayCurrency</span> field in
				the incoming navigation context for filtering the value help
				entity set to render the visual filter chart.</p>
			<p>If there's a parameter in the main entity set with the exact technical name
					<code>P_DisplayCurrency</code>, the value is derived from the incoming
					<code>DisplayCurrency</code> field of the incoming navigation context.</p>
			<p>
				</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>User preference for display currency type is stored in the SAP Fiori launchpad
					user settings. Applications pass this value to filters using the
						<code>DisplayCurrency</code> field.</p></div></div>
			<p></p>
		</section><section id="section_s5q_11l_p3b">
			<h2 class="title "><span class="emphasis">Number Formatting</span></h2>
			<p><code>NumberOfFractionalDigits</code>
				information can be provided in <a href="#/topic/65731e6b823240398e33133908efdaa1.html" title="This topic provides a list of the annotations used in overview pages. They are as follows:" class="sap-doc">com.sap.vocabularies.UI.v1.DataPoint</a> term, using the ValueFormat
				property. The <code>NumberOfFractionalDigits</code> property is used to
				determine the number of fraction digits. These are the rules: </p><ul class="ul ">
					<li class="li">
						<p>Decimals are not shown by default.</p>
					</li>
					<li class="li">
						<p>You can specify 1 or 2 decimal places using
								the<code>NumberOfFractionalDigits</code>
							property in Annotations. If a value of more than 2 is provided, it is
							also
							included.</p>
					</li>
				</ul><p></p>
			<p>In the following example, the price property number of fractional digits provided in
				the OData metadata, 3 is overridden by the value 1 as provided in the <a href="#/topic/65731e6b823240398e33133908efdaa1.html" title="This topic provides a list of the annotations used in overview pages. They are as follows:" class="sap-doc">com.sap.vocabularies.UI.v1.DataPoint</a> ValueFormat property</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>
				</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">&lt;Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="Price"&gt;
    &lt;Record Type="com.sap.vocabularies.UI.v1.DataPointType"&gt;
        &lt;PropertyValue Property="Value" Path="Price"/&gt;
        &lt;PropertyValue Property="ValueFormat"&gt;
            &lt;Record Type="com.sap.vocabularies.UI.v1.NumberFormat"&gt;
                &lt;PropertyValue Property="NumberOfFractionalDigits" int="1"/&gt;
            &lt;/Record&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;
</pre></div></section>
			<p></p></div></div>
		</section><section id="section_t4s_pll_x1b">
			<h2 class="title ">Semantic Coloring for Visual Filter Measure Values</h2>
			<p>Semantic coloring is based on the defined:</p><ul class="ul ">
					<li class="li">
						<p>Criticality in DataPoint annotations. The specified value, or the value
							returned from a path, determines the color</p>
					</li>
					<li class="li">
						<p><code>CriticalityCalculation</code>
							in DataPoint annotations, along with the improvement direction and
							various threshold values. This applies only when the criticality is not
							defined.</p>
					</li>
				</ul><p></p>
			<p><img src="loioa477ee8a509a43faaf108e706efc5a7c_HiRes.png" usemap="#"></p>
			<p>
				</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><p>No color is applied to the chart measure when</p><ul class="ul ">
							<li class="li">
								<p>A neutral value is returned</p>
							</li>
							<li class="li">
								<p>Not enough threshold values are defined or when the improvement
									direction is missing</p>
							</li>
						</ul><p></p>
				<p></p></div></div>
			<p></p>
		</section><section id="section_lgh_q5k_tnb">
			<h2 class="title ">Semantic Coloring for Visual Filter Dimension Values</h2>
			<p>Semantic coloring is based on the defined criticality in the
					<code>ValueCriticality</code> annotations for dimensions. The value returned
				from the path determines the color.</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><ul class="ul ">
						<li class="li">
							<p>No color is applied to the chart dimension when a neutral value is
								returned.</p>
						</li>
						<li class="li">
							<p>Chart measure semantic coloring takes precendence over dimension
								semantic coloring.</p>
						</li>
					</ul>
				<p></p></div></div><p></p>
		</section><section id="section_jsq_yrl_5gb">
			<h2 class="title ">Grouping Visual Filter Calls (Optional)</h2>
			<p>Add a <code>groupId</code> for a set of visual filters to consolidate all group
				calls into one batch call. This helps you group fast-loading visual filters in one
				batch and group all the other slow loading visual filters into a separate batch
				call. This improves rendering of the fast-loading visual
				filters
				over the slow-loading visual filters.</p>
			<p>Define the <code>onBeforeRebindVisualFilterExtension</code> extension controller
				method in the controller file. Ensure that the <code>groupId</code> is one of
				the keys in the <code>oContext</code> object which is passed to the extension as
				a parameter. Provide a valid string value as shown here:</p><div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>
					</p><section><div class="fig fig-codeblock"><pre class="codeblock prettyprint">onBeforeRebindVisualFilterExtension: function(sEntityType, sDimension, sMeasure, oContext){
    'use strict';
    var Log = sap.ui.require("sap/base/Log");
    if (sDimension === "Product") {
        oContext.groupId = "Group1";
    }
    if (sDimension === "DeliveryCalendarMonth" || sDimension === "DeliveryCalendarQuarter") {
        oContext.groupId = "Group2";
    }
    Log.info("onBeforeRebindVisualFilterExtension called!");
}</pre></div></section>
				<p></p></div></div><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><ul class="ul ">
						<li class="li">
							<p>The visual filter calls without a groupId are all combined in one
								batch.</p>
						</li>
						<li class="li">
							<p>Visual filter calls assigned to a <code>groupId</code> reach the
								back end in one batch.</p>
						</li>
					</ul>
				<p></p></div></div><p></p>
		</section><section id="section_nxf_3yy_ghb">
			<h2 class="title ">Guidelines</h2>
			<p>Show the filter dimension with one measure in the visual filter not with multiple
				measures.</p>
			<p>Filter dimensions in the compact filters (filter bar) have exactly one representation
				in the visual filter bar.</p>
			<p>Do not show the same filter dimension with two or more different measures at the same
				time in the visual filter bar. The example shows the filter <code>Dimension
					Year</code> with two different measures <span class="ph uicontrol">Revenue</span> and
					<span class="ph uicontrol">Quantity</span>. Showing the filter
					<span class="ph uicontrol">dimensionYear</span> twice is not in sync with the compact
				filter, where it is shown only once. Furthermore, matching between the two filter
				types won't work.</p>
			<p>If the use case requires you to show a dimension with different measures, consider
				using an overview page instead.</p>
			<div class="tableWrapper "><div class="fig"><tgroup>
					
					
					</tgroup><table border="1" id="table_xvf_wyy_ghb" class=" "><colgroup><col width="1"><col width="1"></colgroup><thead>
						<tr>
							<th colspan="1" rowspan="1">Do</th>
							<th colspan="1" rowspan="1">Don't</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="1" rowspan="1" valign="top"><img src="loioace802e0335f4c8a852250105d020890_LowRes.jpg" usemap="#"></td>
							<td colspan="1" rowspan="1" valign="top"><img src="loiof95c7de60bd442afbbc3478f1fe5ddfc_LowRes.jpg" usemap="#"></td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1" valign="top"><span class="emphasis">For each dimension, display exactly one representation
									in the visual filter bar.</span></td>
							<td colspan="1" rowspan="1" valign="top"><span class="emphasis">Do not use the same filter dimension with different
									measures.</span></td>
						</tr>
					</tbody>
				</table></div></div>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"><li><a href="#/topic/33f3d807c10b47d9a8141692d2619dc2.html" title="The section following the title area is the filter area. Set up filters to get the search results you want in the main content area." class="sap-doc">Configuring the Filter Area</a></li></ul></section></div></section></div></body></html>